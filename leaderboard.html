
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Up Level Guild - Leaderboard</title>
  <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>

  <body>
  <div class="container">
  
  <header>
    <img src="https://i.postimg.cc/wjzpnxjB/Up-Level-01-1.png" alt="Up Level Logo" style="width: 100px; margin-top: 20px;">
    <h1 style="font-family: 'Sarabun', sans-serif;">🏆 Leaderboard</h1>
  </header>

  <main>
    <div id="leaderboard" class="leaderboard-container">
      <p>Loading leaderboard...</p>
    </div>

    <div class="rank-system">
      <h2>🥇 Rank System</h2>
      <table class="rank-table">
        <tr><th>Rank</th><th>EXP Range</th></tr>
        <tr><td>🐣 Rookie</td><td>0–4</td></tr>
        <tr><td>🛡️ Bronze</td><td>5–14</td></tr>
        <tr><td>⚔️ Silver</td><td>15–29</td></tr>
        <tr><td>🥇 Gold</td><td>30–49</td></tr>
        <tr><td>⭐ Platinum</td><td>50–74</td></tr>
        <tr><td>💎 Diamond</td><td>75–119</td></tr>
        <tr><td>👑 Grandmaster</td><td>120–199</td></tr>
        <tr><td>🐉 Legend</td><td>200+</td></tr>
      </table>
    </div>
  </main>

  <footer style="font-size: 12px; padding: 20px; color: #888;">
    &copy; 2025 Up Level Guild System. Powered by Netlify + Google Sheets
  </footer>

  <script>
    async function fetchLeaderboard() {
      const response = await fetch("https://script.google.com/macros/s/AKfycbwJoXR9EFLngOAyA_WjQJNE0zT3MmL2afwlwvxmnMQ88WYzjlD-l2c_LXjg-k3bFWj9/exec?func=getLeaderboard");
      const data = await response.json();
      const container = document.getElementById("leaderboard");
      if (!data || data.length === 0) {
        container.innerHTML = "<p>รอสมาชิกคนแรกของกิลด์อยู่นะ!</p>";
        return;
      }
      const table = document.createElement("table");
      table.className = "leaderboard-table";
      const headerRow = document.createElement("tr");
      ["#", "Codename", "Rank", "EXP", "Party"].forEach(text => {
        const th = document.createElement("th");
        th.textContent = text;
        headerRow.appendChild(th);
      });
      table.appendChild(headerRow);

      const rankEmojis = {
        "Rookie": "🐣", "Bronze": "🛡️", "Silver": "⚔️", "Gold": "🥇",
        "Platinum": "⭐", "Diamond": "💎", "Grandmaster": "👑", "Legend": "🐉"
      };

      data.forEach((player, index) => {
        const row = document.createElement("tr");
        const codename = player["Codename"] || "-";
        const rank = player["Rank"] || "-";
        const exp = player["EXP"] || 0;
        const party = player["Party"] || "-";
        const emoji = rankEmojis[rank] || "";
        const rankDisplay = `<span style='white-space: nowrap;'>${emoji} ${rank} ${emoji}</span>`;
        [index + 1, codename, rankDisplay, exp, party].forEach(cell => {
          const td = document.createElement("td");
          td.innerHTML = cell;
          row.appendChild(td);
        });
        table.appendChild(row);
      });

      container.innerHTML = "";
      container.appendChild(table);
    }
    fetchLeaderboard();
  </script>

  </div>
  </body>

</html>
