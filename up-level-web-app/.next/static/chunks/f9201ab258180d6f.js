(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,26869,e=>{"use strict";var t=e.i(70395),s=e.i(7951),a=e.i(55541),l=e.i(58101);e.i(85670);var r=e.i(25681),i=e.i(50339),n=e.i(8358),d=e.i(27162);let o=(0,d.default)("layout-grid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]),c=(0,d.default)("database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);var x=e.i(89862);let m=(0,d.default)("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),h=(0,d.default)("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var p=e.i(49793),u=e.i(40351),b=e.i(24749);let g=(0,d.default)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);var f=e.i(6517),j=e.i(25664),y=e.i(96967),N=e.i(6004);let w=(0,d.default)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),v=(0,d.default)("wand-sparkles",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]),k=(0,d.default)("arrow-up-right",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);var C=e.i(45600);let S=(0,d.default)("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]),_=(0,d.default)("square-check-big",[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),D=(0,d.default)("wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]]),M=(0,d.default)("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),A=(0,d.default)("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]),P=(0,d.default)("circle-plus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]),E=(0,d.default)("user-minus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),L=(0,d.default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]),I=(0,d.default)("highlighter",[["path",{d:"m9 11-6 6v3h9l3-3",key:"1a3l36"}],["path",{d:"m22 12-4.6 4.6a2 2 0 0 1-2.8 0l-5.2-5.2a2 2 0 0 1 0-2.8L14 4",key:"14a9rk"}]]),R=async(e,t,s,a)=>{let l="users",n=null,d=(0,r.query)((0,r.collection)(i.db,"users"),(0,r.where)("phone","==",e)),o=await (0,r.getDocs)(d);if(o.empty?((0,r.doc)(i.db,"legacy_users",e),await (0,r.getDocs)((0,r.query)((0,r.collection)(i.db,"legacy_users"),(0,r.where)("phone","==",e))),l="legacy_users",n=e):(n=o.docs[0].id,o.docs[0].data()),!n)throw Error(`User with phone ${e} not found.`);return await (0,r.runTransaction)(i.db,async d=>{let o=(0,r.doc)(i.db,l,n),c=await d.get(o);if(!c.exists())throw Error("User does not exist!");let x=Number(c.data().exp||0),m=x+t;d.update(o,{exp:m,lastUpdated:(0,r.serverTimestamp)()});let h=(0,r.doc)((0,r.collection)(i.db,"system_logs"));d.set(h,{type:"ADD_EXP",phone:e,amount:t,oldExp:x,newExp:m,admin:s,reason:a,timestamp:(0,r.serverTimestamp)()})}),{success:!0,newExp:t}},T=async(e,t,s,a)=>{if(!e)throw Error("Party name required");return(0,r.doc)(i.db,"party_system",e),await (0,r.setDoc)((0,r.doc)((0,r.collection)(i.db,"log_party")),{action:"ADD_POINTS",party:e,amount:t,admin:s,reason:a,timestamp:(0,r.serverTimestamp)()}),{success:!0}},O="https://script.google.com/macros/s/AKfycbxtjsDwHI6nJU4OIHExUxMaZwUn3qwakvdkzwbQO7C8Trzz5Gh84SX6F1gqb4BOFQcn/exec",U="up-level-secret-key-1234",$=["chawanut.cha@gmail.com","admin@uplevel.com","champ.championest@gmail.com","uplevel.ad@gmail.com","boomboom08755@gmail.com","earth9784@gmail.com","nuslove2560@gmail.com","phooreephat.k@gmail.com","twinstiwly@gmail.com"],z=e=>{let t=(e||"").toLowerCase();return t.includes("legend")?"ðŸ‰":t.includes("grand")?"ðŸ‘‘":t.includes("diamond")?"ðŸ’Ž":t.includes("platinum")?"âœ¨":t.includes("gold")?"ðŸ¥‡":t.includes("silver")?"âš”ï¸":t.includes("bronze")?"ðŸ›¡ï¸":"ðŸ£"};function q(){let e,d,{user:q,loading:G,signInWithGoogle:H,signOut:V}=(0,a.useAuth)(),X=(0,l.useRouter)(),[B,Q]=(0,s.useState)("OVERVIEW"),[F,W]=(0,s.useState)([]),[J,K]=(0,s.useState)([]),[Z,Y]=(0,s.useState)([]),[ee,et]=(0,s.useState)([]),[es,ea]=(0,s.useState)([]),[el,er]=(0,s.useState)(""),[ei,en]=(0,s.useState)(null),[ed,eo]=(0,s.useState)([]),[ec,ex]=(0,s.useState)(!1),[em,eh]=(0,s.useState)(null),[ep,eu]=(0,s.useState)(null),[eb,eg]=(0,s.useState)(!1),[ef,ej]=(0,s.useState)({}),[ey,eN]=(0,s.useState)(null),[ew,ev]=(0,s.useState)(null),[ek,eC]=(0,s.useState)(null),[eS,e_]=(0,s.useState)(null),[eD,eM]=(0,s.useState)(null),[eA,eP]=(0,s.useState)(null),[eE,eL]=(0,s.useState)([]),eI=async(e,t)=>{if(q?.email)try{await (0,r.addDoc)((0,r.collection)(i.db,"admin_logs"),{admin:q.email,action:e,details:"string"==typeof t?t:JSON.stringify(t),timestamp:new Date})}catch(e){console.error("Log Error",e)}};(0,s.useEffect)(()=>{if(!G&&q&&$.includes(q.email||"")){let e=(0,r.onSnapshot)((0,r.collection)(i.db,"legacy_users"),e=>W(e.docs.map(e=>({id:e.id,...e.data()})))),t=(0,r.onSnapshot)((0,r.collection)(i.db,"users"),e=>K(e.docs.map(e=>({id:e.id,...e.data()})))),s=(0,r.onSnapshot)((0,r.collection)(i.db,"claim_requests"),e=>Y(e.docs.map(e=>({id:e.id,...e.data()})))),a=(0,r.onSnapshot)((0,r.query)((0,r.collection)(i.db,"public_payments"),(0,r.orderBy)("verifiedAt","desc"),(0,r.limit)(50)),e=>{et(e.docs.map(e=>({id:e.id,...e.data()})))});return(0,r.getDocs)((0,r.collection)(i.db,"system_data")).then(e=>{let t=e.docs.map(e=>({id:e.id,...e.data()})),s={};t.forEach(e=>{let t=e.category||"Uncategorized";s[t]||(s[t]=[]),s[t].push(e)}),eo(Object.entries(s))}),()=>{e(),t(),s(),a()}}},[q,G]),(0,s.useEffect)(()=>{if("LOGS"===B&&q?.email==="champ.championest@gmail.com"){let e=(0,r.query)((0,r.collection)(i.db,"admin_logs"),(0,r.orderBy)("timestamp","desc"),(0,r.limit)(100)),t=(0,r.onSnapshot)(e,e=>eL(e.docs.map(e=>({id:e.id,...e.data()}))));return()=>t()}},[B,q]);let eR=async()=>{ex(!0),er("Members"),en("unified_members_view");try{let e=(0,r.collection)(i.db,"users"),t=(await (0,r.getDocs)(e)).docs.map(e=>({id:e.id,...e.data(),isClaimed:!0,source:"app_user",_status:"Claimed"})),s=(0,r.collection)(i.db,"legacy_users"),a=(await (0,r.getDocs)(s)).docs.map(e=>({id:e.id,...e.data(),isClaimed:!1,source:"sheet_sync",_status:"Unclaimed"})),l=[...t,...a];l.sort((e,t)=>e.isClaimed!==t.isClaimed?e.isClaimed?-1:1:(t.exp||0)-(e.exp||0)),ea(l),console.log(`Loaded ${l.length} unified members.`)}catch(e){console.error(e),alert("Failed to load members")}finally{ex(!1)}},eT=async()=>{if(confirm("Start Full System Sync? This will update Quests, Shop, and Leaderboard data from Google Sheets.")){ex(!0);try{console.log("Syncing Quests..."),await eU("quests","Quest List"),console.log("Syncing Shop..."),await eU("shop","Reward Catalog"),console.log("Syncing Dashboard..."),await eU("member_dashboard","Member Dashboard"),alert("âœ… All System Data Synced!")}catch(e){console.error(e),alert("âŒ Sync Failed: "+e.message)}finally{ex(!1)}}},eO=async(e,t)=>{ex(!0),er(t),en(e),ea([]);try{if("Leaderboard"===t||"Member Dashboard"===t||"Quests"===t||"Shop"===t)return void await eU(t,e);let s=(0,r.doc)(i.db,"system_data",e),a=await (0,r.getDoc)(s);if(a.exists()){let e=(a.data().items||[]).filter(e=>e&&"object"==typeof e);if(e.length>0){Object.keys(e[0]).map(e=>e.toLowerCase());let t=Object.keys(e[0]).find(e=>{let t=e.toLowerCase();return t.includes("date")||t.includes("time")||t.includes("timestamp")});t&&e.sort((e,s)=>{let a=new Date(e[t]).getTime(),l=new Date(s[t]).getTime();return isNaN(a)||isNaN(l)?0:l-a})}ea(e)}}catch(e){console.error(e)}finally{ex(!1)}},eU=async(e,t)=>{ex(!0);try{let s=e||el,a=t||ei;if(s){let e=await fetch(`${O}?action=get_sheet_data&sheet=${encodeURIComponent(s)}&secret=${U}&t=${new Date().getTime()}`),t=await e.json(),l=[];"success"===t.status&&t.data?Array.isArray(t.data)?l=t.data:t.data.items?l=t.data.items:"object"==typeof t.data&&(l=Object.values(t.data)):Array.isArray(t)&&(l=t);let n=(l=l.filter(e=>e&&"object"==typeof e&&Object.keys(e).length>0)).length;if(a&&n>0)try{console.log(`Syncing ${s} to Firestore (${a})...`),await (0,r.setDoc)((0,r.doc)(i.db,"system_data",a),{items:l,lastUpdated:(0,r.serverTimestamp)()},{merge:!0}),console.log("Sync Complete")}catch(e){console.error("Firestore Sync Error:",e)}return ea(l),eN(new Date),n}return 0}catch(e){return console.error(e),0}finally{ex(!1)}},e$=async(e,t)=>{eg(!0),ev(null);try{if("add_exp"===e||"deduct_exp"===e){let s="deduct_exp"===e?-Math.abs(Number(t.amount)):Math.abs(Number(t.amount));await R(t.phone,s,q?.email||"Admin",t.reason||"Admin Action"),ev({success:!0,message:`Successfully ${"add_exp"===e?"Added":"Deducted"} ${Math.abs(s)} EXP.`})}else"add_party_point"===e?(await T(t.partyName,Number(t.amount),q?.email||"Admin",t.reason||"Admin Action"),ev({success:!0,message:`Added ${t.amount} points to ${t.partyName}!`})):(await fetch(O,{method:"POST",mode:"no-cors",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:e,secret:U,...t,adminName:q?.email})}),ev({success:!0,message:"Command sent to Script! Checking..."}));await eI(e,t),ej({})}catch(e){console.error(e),ev({error:!0,message:"Error: "+e.message})}finally{eg(!1)}},ez=async()=>{if(!ek)return;let e={targetPhone:ek.originalPhone,newPhone:ek.phone,displayName:ek.displayName,codename:ek.codename,rank:ek.rank,exp:ek.exp,party:ek.party};await e$("edit_member",e),eC(null)},eq=async()=>{if(em){ex(!0);try{let e=em.isClaimed?"users":"legacy_users",t=em.id||em.phone;if(!t)throw Error("Missing Document ID");let s={displayName:em.displayName,codename:em.codename,phone:em.phone,rank:em.rank,exp:Number(em.exp),rebirthCount:Number(em.rebirthCount||0),expMultiplier:Number(em.expMultiplier||1),party:em.party,lastUpdated:(0,r.serverTimestamp)()};await (0,r.updateDoc)((0,r.doc)(i.db,e,t),s),await eR(),eh(null),alert("âœ… Member Updated Successfully!")}catch(e){console.error(e),alert("Error updating member: "+e.message)}finally{ex(!1)}}},eG=async()=>{if(!eS)return;let e={sheetName:el,rowIndex:eS._rowIndex,updates:eS.data};await e$("update_sheet_row",e);let t=[...es];t[eS._index]&&(t[eS._index]=eS.data,ea(t)),e_(null)},eH=async e=>{if(confirm(`Approve ${e.currentDisplayName}?`)){eP(e.id);try{let t=(0,r.writeBatch)(i.db),s=(0,r.doc)(i.db,"users",e.uid),a=(0,r.doc)(i.db,"claim_requests",e.id),l=(0,r.doc)(i.db,"legacy_users",e.requestedPhone),n=await (0,r.getDoc)(l),d=n.exists()?n.data():e.legacyData;t.update(s,{rank:d.rank,exp:d.exp,party:d.party||"",phone:e.requestedPhone,codename:d.codename||"",rebirthCount:d.rebirthCount||0,expMultiplier:d.expMultiplier||1,isLegacyLinked:!0,lastSynced:new Date().toISOString()}),t.delete(a),n.exists()&&t.delete(l),await eI("approve_claim",e),await t.commit()}catch(e){alert(e.message)}finally{eP(null)}}},eV=async e=>{if(confirm("Reject?")){eP(e);try{await (0,r.deleteDoc)((0,r.doc)(i.db,"claim_requests",e))}catch(e){alert(e.message)}finally{eP(null)}}},eX=({title:e,icon:s,color:a,onClick:l})=>(0,t.jsxs)("button",{onClick:l,className:"bg-[#2b2d42] p-4 rounded-xl border border-slate-700/50 hover:bg-[#32344a] hover:border-slate-500 transition-all text-left flex items-start gap-3 group w-full",children:[(0,t.jsx)("div",{className:`p-3 rounded-lg ${a} bg-opacity-20 text-white group-hover:scale-110 transition-transform`,children:(0,t.jsx)(s,{className:`w-5 h-5 ${a.replace("bg-","text-")}`})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-bold text-white text-sm group-hover:text-blue-400 transition-colors",children:e}),(0,t.jsx)("div",{className:"text-[10px] text-slate-500 mt-1",children:"Remote Execution"})]})]}),eB=({title:e,children:s,onClose:a})=>(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:(0,t.jsxs)("div",{className:"bg-[#1e1e24] w-full max-w-md rounded-2xl border border-slate-700 shadow-2xl overflow-hidden",children:[(0,t.jsxs)("div",{className:"p-4 border-b border-slate-700 flex justify-between items-center bg-[#2b2d42]",children:[(0,t.jsxs)("h3",{className:"font-bold text-white flex items-center gap-2",children:[(0,t.jsx)(v,{className:"w-4 h-4 text-purple-400"})," ",e]}),(0,t.jsx)("button",{onClick:a,className:"text-slate-400 hover:text-white",children:(0,t.jsx)(j.X,{className:"w-5 h-5"})})]}),(0,t.jsx)("div",{className:"p-6",children:s})]})});return G?(0,t.jsxs)("div",{className:"h-screen bg-[#1e1e24] flex items-center justify-center text-white gap-2",children:[(0,t.jsx)(N.Loader2,{className:"animate-spin text-blue-500"})," Verifying Access..."]}):q?$.includes((q.email||"").toLowerCase())?(0,t.jsxs)("div",{className:"min-h-screen bg-[#1e1e24] text-slate-200 font-sans pb-24",children:[(0,t.jsxs)("div",{className:"bg-[#2b2d42] px-6 py-4 shadow-xl sticky top-0 z-20 flex justify-between items-center border-b border-slate-700/50",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 font-bold text-white text-lg tracking-tight",children:[(0,t.jsx)("div",{className:"w-8 h-8 rounded-lg bg-blue-600 flex items-center justify-center shadow-lg shadow-blue-500/30",children:(0,t.jsx)(n.Shield,{className:"w-5 h-5 text-white fill-white/20"})}),(0,t.jsxs)("div",{children:["Admin Portal",(0,t.jsxs)("div",{className:"text-[10px] text-slate-400 font-normal leading-none mt-1",children:["Logged as ",q.displayName]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)("button",{onClick:V,className:"text-xs text-red-400 hover:text-red-300 px-3 py-2 flex items-center gap-2",children:[(0,t.jsx)(S,{className:"w-3 h-3"})," Sign Out"]}),(0,t.jsx)("button",{onClick:()=>X.push("/dashboard"),className:"text-xs bg-slate-700/50 hover:bg-slate-700 px-4 py-2 rounded-lg transition-colors font-medium border border-slate-600",children:"Client View"})]})]}),(0,t.jsx)("div",{className:"px-6 pt-6 pb-2",children:(0,t.jsxs)("div",{className:"flex bg-[#23232a] p-1 rounded-2xl w-fit border border-slate-700/50 overflow-x-auto",children:[["OVERVIEW","EXPLORER","ACTIONS","PAYMENTS","APPLICATIONS","REQUESTS"].map(e=>(0,t.jsxs)("button",{onClick:()=>Q(e),className:`px-6 py-2.5 rounded-xl text-xs font-bold transition-all whitespace-nowrap relative ${B===e?"bg-slate-600 text-white shadow-lg":"text-slate-500 hover:text-slate-300"}`,children:[e,"PAYMENTS"===e&&ee.filter(e=>"pending_admin"===e.status).length>0&&(0,t.jsx)("span",{className:"absolute -top-1 -right-1 w-4 h-4 bg-amber-500 rounded-full flex items-center justify-center text-[9px] border-2 border-[#1e1e24]",children:ee.filter(e=>"pending_admin"===e.status).length}),"REQUESTS"===e&&Z.length>0&&(0,t.jsx)("span",{className:"absolute -top-1 -right-1 w-4 h-4 bg-red-500 rounded-full flex items-center justify-center text-[9px] border-2 border-[#1e1e24]",children:Z.length}),"APPLICATIONS"===e&&J.filter(e=>"pending_payment"===e.status).length>0&&(0,t.jsx)("span",{className:"absolute -top-1 -right-1 w-4 h-4 bg-blue-500 rounded-full flex items-center justify-center text-[9px] border-2 border-[#1e1e24]",children:J.filter(e=>"pending_payment"===e.status).length})]},e)),q?.email==="champ.championest@gmail.com"&&(0,t.jsxs)("button",{onClick:()=>Q("LOGS"),className:`px-6 py-2.5 rounded-xl text-xs font-bold transition-all whitespace-nowrap flex items-center gap-2 ${"LOGS"===B?"bg-amber-600/20 text-amber-500 shadow-lg border border-amber-500/50":"text-amber-700 hover:text-amber-500"}`,children:[(0,t.jsx)(n.Shield,{className:"w-3 h-3"})," LOGS"]})]})}),(0,t.jsxs)("div",{className:"px-6 py-4",children:["OVERVIEW"===B&&(0,t.jsxs)("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-2 duration-300",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,t.jsxs)("div",{className:"bg-gradient-to-br from-blue-600/20 to-blue-900/10 p-5 rounded-2xl border border-blue-500/30",children:[(0,t.jsx)("div",{className:"text-[10px] font-bold text-blue-300 mb-1 tracking-wider",children:"TOTAL WAITING"}),(0,t.jsx)("div",{className:"text-3xl font-black text-white",children:F.length})]}),(0,t.jsxs)("div",{className:"bg-gradient-to-br from-green-600/20 to-green-900/10 p-5 rounded-2xl border border-green-500/30",children:[(0,t.jsx)("div",{className:"text-[10px] font-bold text-green-300 mb-1 tracking-wider",children:"ACTIVE"}),(0,t.jsx)("div",{className:"text-3xl font-black text-white",children:J.filter(e=>e.phone).length})]})]}),(0,t.jsxs)("div",{className:"bg-[#2b2d42] rounded-2xl overflow-hidden border border-slate-700/50 shadow-2xl",children:[(0,t.jsxs)("div",{className:"px-6 py-4 border-b border-slate-700/50 flex justify-between items-center bg-[#23232a]",children:[(0,t.jsx)("h3",{className:"font-bold text-white text-sm",children:"Unclaimed Members"}),(0,t.jsx)("span",{className:"text-xs text-slate-500 bg-slate-800 px-2 py-1 rounded",children:"Source: Sheet"})]}),(0,t.jsx)("div",{className:"max-h-[60vh] overflow-y-auto custom-scrollbar",children:(0,t.jsxs)("table",{className:"w-full text-left text-xs",children:[(0,t.jsx)("thead",{className:"bg-[#2a2a35] text-slate-500 sticky top-0 z-10",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"p-4",children:"Rank"}),(0,t.jsx)("th",{className:"p-4",children:"Profile"}),(0,t.jsx)("th",{className:"p-4 text-right",children:"EXP"}),(0,t.jsx)("th",{className:"p-4 text-right",children:"Action"})]})}),(0,t.jsx)("tbody",{className:"divide-y divide-slate-700/20",children:F.map(e=>(0,t.jsxs)("tr",{className:"hover:bg-white/5 transition-colors group",children:[(0,t.jsx)("td",{className:"p-4 text-2xl text-center w-16 bg-black/10 group-hover:bg-transparent transition-colors",children:z(e.rank)}),(0,t.jsxs)("td",{className:"p-4",children:[(0,t.jsx)("div",{className:"font-bold text-white text-sm",children:e.displayName}),(0,t.jsxs)("div",{className:"text-[10px] text-slate-500 mt-1 font-mono",children:[e.codename," â€¢ ",e.phone]})]}),(0,t.jsx)("td",{className:"p-4 text-right font-mono text-yellow-400 font-bold text-sm bg-black/10 group-hover:bg-transparent",children:e.exp?.toLocaleString()}),(0,t.jsx)("td",{className:"p-4 text-right",children:(0,t.jsx)("button",{onClick:()=>eC({...e,originalPhone:e.phone}),className:"p-2 bg-slate-700/50 hover:bg-blue-600 text-slate-400 hover:text-white rounded-lg transition-all",children:(0,t.jsx)(h,{className:"w-4 h-4"})})})]},e.phone))})]})})]})]}),"PAYMENTS"===B&&(0,t.jsxs)("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-2 duration-300",children:[(0,t.jsx)("div",{className:"flex justify-between items-center",children:(0,t.jsxs)("h2",{className:"text-xl font-bold flex items-center gap-2",children:[(0,t.jsx)(b.ScrollText,{className:"w-6 h-6 text-amber-400"}),"Incoming Payments (",ee.filter(e=>"pending_admin"===e.status).length,")"]})}),0===ee.length?(0,t.jsxs)("div",{className:"p-12 text-center text-slate-500 bg-[#2b2d42] rounded-2xl border border-slate-700/50 border-dashed",children:[(0,t.jsx)(w,{className:"w-12 h-12 mx-auto mb-4 opacity-20"}),(0,t.jsx)("p",{children:"No payment records found."})]}):(0,t.jsxs)("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-6",children:[(0,t.jsx)("div",{className:"xl:col-span-2 space-y-4",children:ee.map(e=>(0,t.jsxs)("div",{className:`bg-[#2b2d42] border ${"pending_admin"===e.status?"border-amber-500/30":"border-slate-700/50"} p-4 rounded-2xl flex justify-between items-center group hover:bg-[#32344a] transition-all`,children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("div",{className:"text-2xl font-black text-white w-24",children:["à¸¿",e.amount.toLocaleString()]}),(0,t.jsx)("div",{className:"h-10 w-[1px] bg-slate-700"}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"font-bold text-white text-sm",children:[e.customerName," ",(0,t.jsxs)("span",{className:"text-[10px] font-normal text-slate-500",children:["[",e.sender?.displayName,"]"]})]}),(0,t.jsxs)("div",{className:"text-[10px] text-slate-400 flex gap-2",children:[(0,t.jsxs)("span",{children:["Ref: ",e.transRef]}),(0,t.jsx)("span",{children:"â€¢"}),(0,t.jsx)("span",{children:e.verifiedAt?.toDate?e.verifiedAt.toDate().toLocaleString():"Just now"})]}),e.note&&(0,t.jsxs)("div",{className:"text-xs text-indigo-300 mt-1 italic",children:['Note: "',e.note,'"']}),e.category&&(0,t.jsx)("div",{className:"mt-1",children:(0,t.jsx)("span",{className:"text-[9px] bg-green-500/20 text-green-400 px-1.5 py-0.5 rounded-full border border-green-500/30 uppercase font-bold",children:e.category})})]})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[e.slipImage&&(0,t.jsx)("button",{onClick:()=>eM(e.slipImage),className:"p-2 bg-slate-700/50 hover:bg-slate-700 text-slate-300 rounded-lg transition-colors",children:(0,t.jsx)(m,{className:"w-4 h-4"})}),"pending_admin"===e.status&&(0,t.jsxs)("div",{className:"flex gap-1",children:[(0,t.jsxs)("select",{onChange:t=>{let s=t.target.value;s&&confirm(`Mark this payment as ${s}?`)&&(0,r.updateDoc)((0,r.doc)(i.db,"public_payments",e.id),{category:s,status:"verified",processedBy:q?.email,processedAt:(0,r.serverTimestamp)()})},className:"bg-[#1e1e24] text-xs border border-slate-600 rounded-lg px-2 py-1 outline-none focus:border-indigo-500",children:[(0,t.jsx)("option",{value:"",children:"Categorize..."}),(0,t.jsx)("option",{value:"à¸„à¹ˆà¸²à¹€à¸‚à¹‰à¸²à¹à¸‚à¹ˆà¸‡",children:"à¸„à¹ˆà¸²à¹€à¸‚à¹‰à¸²à¹à¸‚à¹ˆà¸‡ (Tournament)"}),(0,t.jsx)("option",{value:"à¸„à¹ˆà¸²à¸‚à¸™à¸¡/à¸™à¹‰à¸³",children:"à¸„à¹ˆà¸²à¸‚à¸™à¸¡/à¸™à¹‰à¸³"}),(0,t.jsx)("option",{value:"à¸„à¹ˆà¸²à¸ªà¸¡à¸²à¸Šà¸´à¸à¸£à¸²à¸¢à¹€à¸”à¸·à¸­à¸™",children:"à¸„à¹ˆà¸²à¸ªà¸¡à¸²à¸Šà¸´à¸à¸£à¸²à¸¢à¹€à¸”à¸·à¸­à¸™"}),(0,t.jsx)("option",{value:"à¸„à¹ˆà¸²à¸à¸²à¸£à¹Œà¸”/à¸ªà¸´à¸™à¸„à¹‰à¸²",children:"à¸„à¹ˆà¸²à¸à¸²à¸£à¹Œà¸”/à¸ªà¸´à¸™à¸„à¹‰à¸²"}),(0,t.jsx)("option",{value:"à¸­à¸·à¹ˆà¸™ à¹†",children:"à¸­à¸·à¹ˆà¸™ à¹†"})]}),(0,t.jsx)("button",{onClick:async()=>{confirm("Delete this record?")&&await (0,r.deleteDoc)((0,r.doc)(i.db,"public_payments",e.id))},className:"p-2 hover:bg-red-500/20 text-red-500 rounded-lg transition-colors",children:(0,t.jsx)(L,{className:"w-4 h-4"})})]})]})]},e.id))}),(0,t.jsxs)("div",{className:"hidden xl:block bg-[#15151a] border border-slate-700/50 rounded-2xl p-6 h-fit sticky top-24",children:[(0,t.jsx)("div",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-wider mb-4",children:"Payment Summary (Today)"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex justify-between items-end",children:[(0,t.jsx)("div",{className:"text-sm text-slate-400",children:"Total Verified"}),(0,t.jsxs)("div",{className:"text-2xl font-black text-green-400",children:["à¸¿",ee.filter(e=>"verified"===e.status).reduce((e,t)=>e+(t.amount||0),0).toLocaleString()]})]}),(0,t.jsx)("div",{className:"h-[1px] bg-slate-800"}),(0,t.jsx)("div",{className:"space-y-2",children:["à¸„à¹ˆà¸²à¹€à¸‚à¹‰à¸²à¹à¸‚à¹ˆà¸‡","à¸„à¹ˆà¸²à¸‚à¸™à¸¡/à¸™à¹‰à¸³","à¸„à¹ˆà¸²à¸ªà¸¡à¸²à¸Šà¸´à¸à¸£à¸²à¸¢à¹€à¸”à¸·à¸­à¸™","à¸„à¹ˆà¸²à¸à¸²à¸£à¹Œà¸”/à¸ªà¸´à¸™à¸„à¹‰à¸²"].map(e=>(0,t.jsxs)("div",{className:"flex justify-between text-[11px]",children:[(0,t.jsx)("span",{className:"text-slate-500",children:e}),(0,t.jsxs)("span",{className:"text-white font-mono",children:["à¸¿",ee.filter(t=>t.category===e).reduce((e,t)=>e+(t.amount||0),0).toLocaleString()]})]},e))})]})]})]})]}),"APPLICATIONS"===B&&(0,t.jsxs)("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-2 duration-300",children:[(0,t.jsxs)("h2",{className:"text-xl font-bold flex items-center gap-2",children:[(0,t.jsx)(p.Users,{className:"w-6 h-6 text-blue-400"}),"New Member Applications",(0,t.jsxs)("span",{className:"text-sm font-normal text-slate-500 bg-slate-800 px-2 py-0.5 rounded-full",children:[J.filter(e=>"pending_payment"===e.status).length," pending"]})]}),0===J.filter(e=>"pending_payment"===e.status).length?(0,t.jsxs)("div",{className:"p-12 text-center text-slate-500 bg-[#2b2d42] rounded-2xl border border-slate-700/50 border-dashed",children:[(0,t.jsx)(p.Users,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),(0,t.jsx)("p",{children:"No new applications at the moment."})]}):(0,t.jsx)("div",{className:"grid gap-4",children:J.filter(e=>"pending_payment"===e.status).map(e=>(0,t.jsxs)("div",{className:"bg-[#2b2d42] border border-slate-700/50 p-6 rounded-2xl flex justify-between items-center shadow-lg hover:border-slate-500 transition-colors",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"font-bold text-white text-lg",children:e.displayName}),(0,t.jsxs)("div",{className:"text-xs bg-indigo-500/20 text-indigo-300 px-2 py-0.5 rounded border border-indigo-500/30 font-mono",children:["ID: ",e.phone]})]}),(0,t.jsxs)("div",{className:"text-slate-400 text-sm mt-2 flex gap-4",children:[(0,t.jsxs)("span",{className:"flex items-center gap-1.5",children:["Phone: ",e.phone]}),(0,t.jsxs)("span",{className:"flex items-center gap-1.5",children:["Nick: ",e.nickname]}),e.lineId&&(0,t.jsxs)("span",{className:"flex items-center gap-1.5 text-green-400",children:["LINE: ",e.lineId]})]}),(0,t.jsxs)("div",{className:"mt-2 text-[10px] text-slate-500",children:["Applied: ",e.createdAt?.toDate?e.createdAt.toDate().toLocaleString():"Just now"]})]}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)("button",{onClick:async()=>{confirm(`Reject (Delete) ${e.displayName}? This cannot be undone.`)&&await (0,r.deleteDoc)((0,r.doc)(i.db,"users",e.id))},className:"bg-red-900/20 hover:bg-red-900/40 text-red-400 hover:text-white px-4 py-2 rounded-xl text-xs font-bold border border-red-900/30 transition-all",children:"Reject"}),(0,t.jsxs)("button",{onClick:async()=>{confirm(`Approve ${e.displayName}?`)&&await (0,r.updateDoc)((0,r.doc)(i.db,"users",e.id),{status:"active",paymentStatus:"paid",approvedAt:(0,r.serverTimestamp)()})},className:"bg-green-600 hover:bg-green-500 text-white px-6 py-2 rounded-xl text-sm font-bold flex items-center gap-2 shadow-lg shadow-green-900/20 hover:scale-105 transition-all",children:[(0,t.jsx)(y.Check,{className:"w-4 h-4"})," Approve Application"]})]})]},e.id))})]}),"EXPLORER"===B&&(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-6 h-[75vh] animate-in fade-in",children:[(0,t.jsxs)("div",{className:"md:col-span-3 bg-[#2b2d42] rounded-2xl border border-slate-700/50 overflow-y-auto custom-scrollbar p-2",children:[(0,t.jsxs)("button",{onClick:eT,disabled:ec,className:"w-full mb-6 bg-gradient-to-r from-indigo-600 to-blue-600 hover:from-indigo-500 hover:to-blue-500 text-white font-bold py-3 px-4 rounded-xl shadow-lg flex items-center justify-center gap-2 transition-all active:scale-95 disabled:opacity-50",children:[(0,t.jsx)(w,{className:`w-4 h-4 ${ec?"animate-spin":""}`}),"Sync All Data"]}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("div",{className:"px-3 py-2 text-[10px] font-bold text-slate-500 uppercase tracking-wider flex items-center gap-2",children:"Management"}),(0,t.jsx)("div",{className:"space-y-1",children:(0,t.jsxs)("button",{onClick:()=>{er("Members"),ea([]),eR()},className:`w-full text-left px-3 py-2 rounded-lg text-xs font-medium transition-all flex items-center justify-between group ${"Members"===el?"bg-indigo-600 text-white":"text-slate-400 hover:bg-white/5 hover:text-white"}`,children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(p.Users,{className:"w-3.5 h-3.5"}),"Member Manager"]}),"Members"===el&&(0,t.jsx)(g,{className:"w-3 h-3 text-white/70"})]})})]}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("div",{className:"px-3 py-2 text-[10px] font-bold text-slate-500 uppercase tracking-wider flex items-center gap-2",children:"System Sheets"}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsxs)("button",{onClick:()=>eO("quests","Quests"),className:`w-full text-left px-3 py-2 rounded-lg text-xs font-medium transition-all flex items-center justify-between group ${"Quests"===el?"bg-indigo-600 text-white":"text-slate-400 hover:bg-white/5 hover:text-white"}`,children:["Quest Board","Quests"===el&&(0,t.jsx)(g,{className:"w-3 h-3 text-white/70"})]}),(0,t.jsxs)("button",{onClick:()=>eO("shop","Shop"),className:`w-full text-left px-3 py-2 rounded-lg text-xs font-medium transition-all flex items-center justify-between group ${"Shop"===el?"bg-indigo-600 text-white":"text-slate-400 hover:bg-white/5 hover:text-white"}`,children:["Item Shop","Shop"===el&&(0,t.jsx)(g,{className:"w-3 h-3 text-white/70"})]})]})]}),ed.map(([e,s])=>(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("div",{className:"px-3 py-2 text-[10px] font-bold text-slate-500 uppercase tracking-wider flex items-center gap-2",children:e}),(0,t.jsx)("div",{className:"space-y-1",children:s.map(e=>(0,t.jsxs)("button",{onClick:()=>eO(e.id,e.title),className:`w-full text-left px-3 py-2 rounded-lg text-xs font-medium transition-all flex items-center justify-between group ${el===e.title?"bg-indigo-600 text-white shadow-md":"text-slate-400 hover:bg-white/5 hover:text-white"}`,children:[e.title,el===e.title&&(0,t.jsx)(g,{className:"w-3 h-3 text-white/70"})]},e.id))})]},e))]}),(0,t.jsxs)("div",{className:"md:col-span-9 bg-[#2b2d42] rounded-2xl border border-slate-700/50 overflow-hidden flex flex-col shadow-2xl",children:[(0,t.jsxs)("div",{className:"px-6 py-4 border-b border-slate-700/50 bg-[#23232a] flex justify-between items-center h-16 shrink-0",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("h3",{className:"font-bold text-white text-sm flex items-center gap-2",children:[(0,t.jsx)(c,{className:"w-4 h-4 text-indigo-400"}),el||"Select a Data Source"]}),el&&(0,t.jsxs)(t.Fragment,{children:[("Member Dashboard"===el||"member"===el)&&(0,t.jsx)("button",{onClick:async()=>{confirm("Run 'Fix Phones' to add leading zeros to all phone numbers in the sheet?")&&(await e$("fix_phones",{}),await eU(el))},className:"p-1.5 hover:bg-slate-700 rounded-full transition-colors text-amber-400 hover:text-amber-200",title:"Fix Phone Numbers (Add leading 0)",disabled:ec||eb,children:(0,t.jsx)(D,{className:`w-3.5 h-3.5 ${eb?"animate-pulse":""}`})}),ey&&(0,t.jsxs)("span",{className:"text-[10px] text-slate-500 font-mono hidden sm:inline-block border-r border-slate-700 pr-3 mr-1",children:["Upd: ",ey.toLocaleTimeString()]}),(0,t.jsx)("button",{onClick:()=>el&&eU(el),className:"p-1.5 hover:bg-slate-700 rounded-full transition-colors text-slate-400 hover:text-white",title:"Refresh Data",disabled:ec,children:(0,t.jsx)(w,{className:`w-3.5 h-3.5 ${ec?"animate-spin":""}`})})]})]}),es.length>0&&(0,t.jsxs)("span",{className:"text-xs text-slate-500 bg-slate-800 px-2 py-1 rounded",children:[es.length," records"]})]}),(0,t.jsx)("div",{className:"flex-1 overflow-auto bg-[#1e1e24]/50 relative",children:ec?(0,t.jsxs)("div",{className:"absolute inset-0 flex items-center justify-center text-slate-500 text-xs gap-2",children:[(0,t.jsx)(N.Loader2,{className:"w-4 h-4 animate-spin"})," Loading..."]}):es.length>0?"Members"===el?(0,t.jsx)("div",{className:"w-full",children:(0,t.jsxs)("table",{className:"w-full text-left text-xs border-collapse",children:[(0,t.jsx)("thead",{className:"sticky top-0 bg-[#2b2d42] shadow-lg z-10",children:(0,t.jsxs)("tr",{className:"text-slate-400 font-semibold border-b border-slate-700",children:[(0,t.jsx)("th",{className:"p-3",children:"Profile"}),(0,t.jsx)("th",{className:"p-3",children:"Rank / Rebirth"}),(0,t.jsx)("th",{className:"p-3",children:"EXP"}),(0,t.jsx)("th",{className:"p-3",children:"Party"}),(0,t.jsx)("th",{className:"p-3 text-right",children:"Last Sync"}),(0,t.jsx)("th",{className:"p-3 text-right",children:"Action"})]})}),(0,t.jsx)("tbody",{className:"divide-y divide-slate-800",children:es.map((e,s)=>(0,t.jsxs)("tr",{className:`hover:bg-white/5 transition-colors ${e.isClaimed?"":"opacity-70 bg-slate-900/30"}`,children:[(0,t.jsx)("td",{className:"p-3",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-bold text-xs ${e.isClaimed?"bg-indigo-500 text-white":"bg-slate-700 text-slate-400"}`,children:e.displayName?.[0]||e.codename?.[0]||"?"}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"font-bold text-white flex items-center gap-2",children:[e.codename||e.displayName||"Unnamed",e.isClaimed&&(0,t.jsx)("span",{className:"text-[9px] bg-green-500/20 text-green-400 px-1 rounded border border-green-500/30",children:"APP"})]}),(0,t.jsx)("div",{className:"text-[10px] text-slate-500 font-mono",children:e.phone})]})]})}),(0,t.jsx)("td",{className:"p-3",children:(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("div",{className:"font-bold text-indigo-300",children:e.rank||"Rookie"}),e.rebirthCount>0&&(0,t.jsxs)("div",{className:"text-[10px] text-amber-400 font-bold flex items-center gap-1",children:[(0,t.jsx)(f.Zap,{className:"w-3 h-3"})," Rebirth ",e.rebirthCount]})]})}),(0,t.jsxs)("td",{className:"p-3",children:[(0,t.jsx)("div",{className:"font-mono text-slate-300",children:(Number(e.exp)||0).toLocaleString()}),e.expMultiplier&&e.expMultiplier>1&&(0,t.jsxs)("div",{className:"text-[9px] text-slate-500",children:["x",e.expMultiplier," Bonus"]})]}),(0,t.jsx)("td",{className:"p-3 text-slate-400",children:e.party||"-"}),(0,t.jsx)("td",{className:"p-3 text-right font-mono text-slate-500 text-[10px]",children:e.lastUpdated?(e.lastUpdated.toDate?e.lastUpdated.toDate():new Date(e.lastUpdated)).toLocaleDateString():"-"}),(0,t.jsx)("td",{className:"p-3 text-right",children:(0,t.jsx)("button",{onClick:()=>eh({...e}),className:"p-1.5 hover:bg-slate-700 text-slate-400 hover:text-white rounded transition-colors",children:(0,t.jsx)(I,{className:"w-4 h-4"})})})]},e.id||s))})]})}):"à¹‚à¸žà¸ªà¸•à¹Œ Rank Up"===el?(0,t.jsx)("div",{className:"p-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:(e=["Bronze","Silver","Gold","Platinum","Diamond","Grandmaster","Legend","God","REBIRTH","Gold II","Platinum II","Diamond II","Grandmaster II","Legend II","God II"],((d=es.map((t,s)=>({...t,_missing:(t=>{let s=(t["Current Rank"]||"").trim(),a=e.indexOf(s);if(-1===a)return[];let l=[];for(let s=0;s<=a;s++){let a=e[s];void 0!==t[a]&&!0!==t[a]&&"true"!==t[a]&&l.push(a)}return l})(t),_rowIndex:t._rowIndex||s+2,_originalIndex:s})).filter(e=>e._missing.length>0)).sort((e,t)=>t._missing.length-e._missing.length),0===d.length)?(0,t.jsxs)("div",{className:"col-span-full flex flex-col items-center justify-center p-12 text-slate-500 opacity-50",children:[(0,t.jsx)(y.Check,{className:"w-12 h-12 mb-2"}),(0,t.jsx)("p",{children:"All rank posts are up to date! Great job!"})]}):d.map((e,s)=>(0,t.jsxs)("div",{className:"bg-[#23232a] border border-slate-700/50 rounded-xl p-4 flex flex-col gap-3 shadow-sm hover:border-slate-500 transition-colors animate-in fade-in slide-in-from-bottom-2",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"text-sm font-bold text-white flex items-center gap-2",children:[(0,t.jsx)(p.Users,{className:"w-4 h-4 text-slate-400"}),e["Code name"]||e.Name||"Unknown"]}),(0,t.jsxs)("div",{className:"text-xs text-slate-400 mt-1 flex items-center gap-1.5",children:["Current Rank:",(0,t.jsx)("span",{className:"px-1.5 py-0.5 rounded bg-blue-500/20 text-blue-300 font-bold border border-blue-500/30",children:e["Current Rank"]||"-"})]})]}),e._missing.length>0&&(0,t.jsxs)("div",{className:"px-2 py-1 rounded bg-red-500/10 border border-red-500/20 text-red-400 text-[10px] font-bold",children:[e._missing.length," MISSING"]})]}),(0,t.jsxs)("div",{className:"bg-[#1e1e24] rounded-lg p-2 space-y-2 border border-slate-700/30",children:[e._missing.map(s=>(0,t.jsxs)("div",{className:"flex items-center justify-between group",children:[(0,t.jsxs)("span",{className:"text-xs font-medium text-slate-300 flex items-center gap-2",children:[(0,t.jsx)(u.Trophy,{className:"w-3 h-3 text-yellow-500/80"}),"Post ",s]}),(0,t.jsxs)("button",{onClick:async()=>{if(!confirm(`Mark ${s} post as DONE for ${e["Code name"]}?`))return;let t=[...es],a=t.findIndex(t=>t._rowIndex===e._rowIndex);-1!==a&&(t[a][s]=!0,ea(t));let l={sheetName:el,rowIndex:e._rowIndex,updates:{[s]:!0}};await e$("update_sheet_row",l),await eU(el)},className:"flex items-center gap-1 px-2 py-1 bg-green-900/40 hover:bg-green-600 border border-green-700/50 text-green-300 hover:text-white rounded text-[10px] font-bold transition-all",children:[(0,t.jsx)(_,{className:"w-3 h-3"})," MARK DONE"]})]},s)),0===e._missing.length&&(0,t.jsxs)("div",{className:"text-center text-[10px] text-green-500 py-1 flex items-center justify-center gap-1",children:[(0,t.jsx)(y.Check,{className:"w-3 h-3"})," All ranks completed"]})]})]},e._originalIndex)))}):(0,t.jsx)("div",{className:"w-full",children:(()=>{let e=Object.keys(es[0]).filter(e=>"_rowIndex"!==e&&"_index"!==e&&"data"!==e);if("Leaderboard"===el||"Member Dashboard"===el){let t=Object.keys(es[0]),s=["à¸Šà¸·à¹ˆà¸­à¹€à¸¥à¹ˆà¸™","Phone","Codename","Rank","EXP","Party","Rebirth Count","EXP Multiplier"].filter(e=>t.includes(e));s.length>0&&(e=s)}return(0,t.jsxs)("table",{className:"w-full text-xs whitespace-nowrap border-collapse",children:[(0,t.jsx)("thead",{className:"bg-[#23232a] text-slate-400 sticky top-0 z-10 shadow-sm border-b border-slate-700",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-4 py-3 text-center font-semibold bg-[#23232a] w-20",children:"Actions"}),e.map(e=>(0,t.jsx)("th",{className:"px-4 py-3 text-left font-semibold bg-[#23232a] text-slate-300",children:e},e))]})}),(0,t.jsx)("tbody",{className:"divide-y divide-slate-700/20 text-slate-300",children:es.map((s,a)=>(0,t.jsxs)("tr",{className:"hover:bg-white/5 transition-colors group",children:[(0,t.jsx)("td",{className:"px-4 py-3 flex items-center justify-center gap-2",children:(0,t.jsxs)("button",{onClick:()=>e_({_index:a,_rowIndex:s._rowIndex||a+2,data:{...s}}),className:"px-3 py-1.5 bg-slate-700/50 hover:bg-indigo-600 text-slate-400 hover:text-white rounded transition-all text-[10px] font-bold flex items-center gap-1.5 border border-slate-600/30 hover:border-indigo-500/50",children:[(0,t.jsx)(h,{className:"w-3 h-3"})," Edit"]})}),e.map((e,a)=>{let l=s[e],r=l;if("Rank"===e)return(0,t.jsx)("td",{className:"px-4 py-3",children:(0,t.jsxs)("span",{className:"inline-flex items-center gap-2 px-2.5 py-1 rounded-md bg-[#1a1a20] border border-slate-700/50 font-bold text-white shadow-sm",children:[(0,t.jsx)("span",{className:"text-sm filter drop-shadow-md",children:z(String(l))}),l]})},a);if("EXP"===e)return(0,t.jsx)("td",{className:"px-4 py-3 font-mono text-amber-400 font-bold text-sm shadow-amber-500/10 drop-shadow-sm",children:l},a);if("Phone"===e||"à¹€à¸šà¸­à¸£à¹Œ"===e||e.toLowerCase().includes("phone"))return(0,t.jsx)("td",{className:"px-4 py-3 font-mono text-slate-400 bg-slate-800/20 rounded px-2",children:l},a);if(l&&(e.toLowerCase().includes("date")||e.toLowerCase().includes("time")||e.includes("à¹€à¸§à¸¥à¸²")||e.includes("à¸§à¸±à¸™"))&&"number"==typeof l&&l>35e3)try{r=new Date((l-25569)*864e5).toLocaleString("th-TH",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch(e){}return(0,t.jsx)("td",{className:"px-4 py-3 font-medium",children:r},a)})]},a))})]})})()}):(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center h-full text-slate-600 gap-3",children:[(0,t.jsx)(o,{className:"w-12 h-12 opacity-20"}),(0,t.jsx)("p",{className:"text-xs",children:"Select data source"})]})})]})]}),"ACTIONS"===B&&(0,t.jsxs)("div",{className:"animate-in fade-in grid grid-cols-1 md:grid-cols-3 gap-6 max-w-5xl mx-auto",children:[(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h3",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest pl-2",children:"EXP & Activity"}),(0,t.jsx)(eX,{title:"Add EXP",icon:f.Zap,color:"bg-yellow-500",onClick:()=>eu("add_exp")}),(0,t.jsx)(eX,{title:"Deduct EXP",icon:k,color:"bg-red-500",onClick:()=>eu("deduct_exp")}),(0,t.jsx)(eX,{title:"Undo Last EXP Action",icon:M,color:"bg-orange-500",onClick:()=>eu("undo_exp")}),(0,t.jsx)(eX,{title:"Add Party Point",icon:A,color:"bg-indigo-500",onClick:()=>eu("add_party_point")}),(0,t.jsx)(eX,{title:"Redeem Party Point",icon:A,color:"bg-pink-600",onClick:()=>eu("redeem_party_point")})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h3",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest pl-2",children:"Party System"}),(0,t.jsx)(eX,{title:"Create Party",icon:P,color:"bg-green-500",onClick:()=>eu("create_party")}),(0,t.jsx)(eX,{title:"Assign / Move Party",icon:p.Users,color:"bg-blue-500",onClick:()=>eu("assign_party")}),(0,t.jsx)(eX,{title:"Remove from Party",icon:E,color:"bg-red-400",onClick:()=>eu("remove_from_party")}),(0,t.jsx)(eX,{title:"Disband Party",icon:L,color:"bg-red-600",onClick:()=>eu("disband_party")})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h3",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest pl-2",children:"System"}),(0,t.jsx)(eX,{title:"Perform Rebirth",icon:w,color:"bg-purple-500",onClick:()=>eu("rebirth")}),(0,t.jsx)(eX,{title:"Update Leaderboard",icon:c,color:"bg-blue-600",onClick:()=>e$("update_leaderboard",{})}),(0,t.jsx)(eX,{title:"Highlight Ranks",icon:I,color:"bg-yellow-600",onClick:()=>e$("highlight_ranks",{})}),(0,t.jsx)(eX,{title:"Manual Sync All",icon:w,color:"bg-slate-600",onClick:()=>e$("sync_all",{})}),(0,t.jsx)(eX,{title:"Reset User (Test Mode)",icon:L,color:"bg-red-900",onClick:()=>eu("reset_user_test")})]})]}),"REQUESTS"===B&&(0,t.jsx)("div",{className:"max-w-3xl mx-auto space-y-4 animate-in fade-in",children:0===Z.length?(0,t.jsxs)("div",{className:"text-center py-20 text-slate-500 bg-[#2b2d42] rounded-2xl border border-slate-700/50",children:[(0,t.jsx)(y.Check,{className:"w-12 h-12 mx-auto mb-3 opacity-20 text-green-500"}),(0,t.jsx)("p",{children:"All clear!"})]}):Z.map(e=>(0,t.jsx)("div",{className:"bg-[#2b2d42] p-5 rounded-2xl border border-slate-700 shadow-lg",children:(0,t.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,t.jsx)("div",{className:"w-12 h-12 rounded-full bg-slate-700 overflow-hidden ring-2 ring-slate-600",children:e.profileImage?(0,t.jsx)("img",{src:e.profileImage,className:"w-full h-full"}):(0,t.jsx)(p.Users,{className:"w-6 h-6 m-auto text-slate-500"})}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"font-bold text-white text-lg",children:[e.currentDisplayName||e.displayName," ",(0,t.jsxs)("span",{className:"text-slate-400 text-sm font-normal",children:["(",e.requestedPhone||e.phone,")"]})]}),(0,t.jsx)("div",{className:"text-xs text-slate-400",children:e.legacyData?.displayName||e.nickname||"Unknown Legacy Name"}),e.slipImage&&(0,t.jsxs)("button",{onClick:()=>eM(e.slipImage),className:"mt-2 text-xs bg-indigo-500/20 text-indigo-300 px-3 py-1 rounded-full border border-indigo-500/30 hover:bg-indigo-500/40 flex items-center gap-1 w-fit",children:[(0,t.jsx)(m,{className:"w-3 h-3"})," View Payment Slip"]})]}),(0,t.jsxs)("div",{className:"ml-auto flex gap-2",children:[(0,t.jsx)("button",{onClick:()=>eV(e.id),className:"px-4 py-2 bg-red-500/10 text-red-400 rounded-lg text-sm font-bold hover:bg-red-500/20",children:"Decline"}),(0,t.jsx)("button",{onClick:()=>eH(e),className:"px-4 py-2 bg-green-600 text-white rounded-lg text-sm font-bold hover:bg-green-500 shadow-lg shadow-green-900/30",children:"Approve"})]})]})},e.id))}),"LOGS"===B&&q?.email==="champ.championest@gmail.com"&&(0,t.jsx)("div",{className:"max-w-7xl mx-auto space-y-4 animate-in fade-in",children:(0,t.jsxs)("div",{className:"bg-[#1e1e24] rounded-2xl border border-slate-700/50 overflow-hidden shadow-2xl",children:[(0,t.jsxs)("div",{className:"p-4 bg-[#23232a] border-b border-slate-700 flex justify-between items-center",children:[(0,t.jsxs)("h3",{className:"font-bold text-white flex items-center gap-2 text-sm",children:[(0,t.jsx)(n.Shield,{className:"text-amber-500 w-4 h-4"})," Admin Action Logs"]}),(0,t.jsxs)("span",{className:"text-xs text-slate-500 bg-black/20 px-2 py-1 rounded",children:[eE.length," Records"]})]}),(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full text-xs text-left whitespace-nowrap",children:[(0,t.jsx)("thead",{className:"bg-[#1a1a20] text-slate-400 font-semibold uppercase tracking-wider sticky top-0",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"p-3 w-40",children:"Time"}),(0,t.jsx)("th",{className:"p-3 w-48",children:"Admin"}),(0,t.jsx)("th",{className:"p-3 w-32",children:"Action"}),(0,t.jsx)("th",{className:"p-3",children:"Details"})]})}),(0,t.jsx)("tbody",{className:"divide-y divide-slate-700/20 text-slate-300 font-mono",children:eE.map(e=>(0,t.jsxs)("tr",{className:"hover:bg-white/5 transition-colors",children:[(0,t.jsx)("td",{className:"p-3 text-slate-500",children:e.timestamp?.toDate?e.timestamp.toDate().toLocaleString("th-TH"):"N/A"}),(0,t.jsx)("td",{className:"p-3 text-blue-400 font-bold",children:e.admin}),(0,t.jsx)("td",{className:"p-3",children:(0,t.jsx)("span",{className:"bg-slate-700/50 border border-slate-600 px-1.5 py-0.5 rounded text-[10px] text-white",children:e.action})}),(0,t.jsx)("td",{className:"p-3 text-slate-400 truncate max-w-xl",title:e.details,children:e.details})]},e.id))})]})})]})})]}),ep&&(0,t.jsx)(eB,{title:ep.replace("_"," ").toUpperCase(),onClose:()=>eu(null),children:ew?(0,t.jsxs)("div",{className:"text-center py-6",children:[(0,t.jsx)("div",{className:`w-12 h-12 rounded-full flex items-center justify-center mx-auto mb-4 ${ew.error?"bg-red-500/20 text-red-500":"bg-green-500/20 text-green-500"}`,children:ew.error?(0,t.jsx)(j.X,{}):(0,t.jsx)(y.Check,{})}),(0,t.jsx)("div",{className:"text-white font-bold mb-2",children:ew.error?"Error":"Success!"}),(0,t.jsx)("div",{className:"text-slate-400 text-xs mb-4",children:ew.message}),(0,t.jsx)("button",{onClick:()=>{ev(null),eu(null)},className:"text-slate-400 hover:text-white underline",children:"Close"})]}):(0,t.jsxs)("div",{className:"space-y-4",children:[!["create_party","disband_party","add_party_point","redeem_party_point"].includes(ep)&&(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-xs text-slate-400 block mb-1",children:"Phone Number"}),(0,t.jsx)("input",{type:"text",className:"w-full bg-[#15151a] border border-slate-700 rounded-lg p-3 text-white focus:border-blue-500 outline-none font-mono",placeholder:"08xxxxxxxx",onChange:e=>ej({...ef,phone:e.target.value})})]}),["create_party","disband_party","assign_party","add_party_point","redeem_party_point"].includes(ep)&&(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-xs text-slate-400 block mb-1",children:"Party Name"}),["create_party","disband_party"].includes(ep)?(0,t.jsx)("input",{type:"text",className:"w-full bg-[#15151a] border border-slate-700 rounded-lg p-3 text-white focus:border-green-500 outline-none",placeholder:"Party Name",onChange:e=>ej({...ef,partyName:e.target.value})}):(0,t.jsxs)("select",{className:"w-full bg-[#15151a] border border-slate-700 rounded-lg p-3 text-white focus:border-pink-500 outline-none",onChange:e=>ej({...ef,partyName:e.target.value}),children:[(0,t.jsx)("option",{value:"",children:"Select Party"}),["Meow","Woof","Hoot","Squeak","Moo","Oink","Gao"].map(e=>(0,t.jsx)("option",{value:e,children:e},e))]})]}),["add_exp","deduct_exp","add_party_point","redeem_party_point"].includes(ep)&&(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-xs text-slate-400 block mb-1",children:"Amount"}),(0,t.jsx)("input",{type:"number",className:"w-full bg-[#15151a] border border-slate-700 rounded-lg p-3 text-white focus:border-blue-500 outline-none",placeholder:"Amount",onChange:e=>ej({...ef,amount:e.target.value})})]}),["add_exp","deduct_exp"].includes(ep)&&(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-xs text-slate-400 block mb-1",children:"Reason / Activity"}),(0,t.jsx)("input",{type:"text",className:"w-full bg-[#15151a] border border-slate-700 rounded-lg p-3 text-white focus:border-blue-500 outline-none",placeholder:"Details...",onChange:e=>ej({...ef,activity:e.target.value,reason:e.target.value})})]}),"rebirth"===ep&&(0,t.jsx)("div",{className:"p-3 bg-red-500/10 border border-red-500/30 rounded-lg text-red-200 text-xs text-center",children:"âš ï¸ Warning: This will reset the user's Level but keep the Rank, and increment Rebirth Count."}),"disband_party"===ep&&(0,t.jsx)("div",{className:"p-3 bg-red-500/10 border border-red-500/30 rounded-lg text-red-200 text-xs text-center",children:"âš ï¸ Warning: This will DELETE the party and remove all members from it."}),(0,t.jsx)("button",{disabled:eb,onClick:()=>e$(ep,ef),className:"w-full bg-blue-600 text-white font-bold py-3 rounded-xl hover:bg-blue-500 disabled:opacity-50 flex justify-center shadow-lg shadow-blue-900/40",children:eb?(0,t.jsx)(N.Loader2,{className:"animate-spin"}):"Execute Command"})]})}),ek&&(0,t.jsx)(eB,{title:"Edit Member",onClose:()=>eC(null),children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-xs text-slate-400 block mb-1",children:"Nickname"}),(0,t.jsx)("input",{type:"text",className:"w-full bg-[#15151a] border border-slate-700 rounded-lg p-3 text-white focus:border-blue-500 outline-none",value:ek.displayName||"",onChange:e=>eC({...ek,displayName:e.target.value})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-xs text-slate-400 block mb-1",children:"Codename"}),(0,t.jsx)("input",{type:"text",className:"w-full bg-[#15151a] border border-slate-700 rounded-lg p-3 text-white focus:border-blue-500 outline-none",value:ek.codename||"",onChange:e=>eC({...ek,codename:e.target.value})})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-xs text-slate-400 block mb-1",children:"Phone Number"}),(0,t.jsx)("input",{type:"text",className:"w-full bg-[#15151a] border border-slate-700 rounded-lg p-3 text-white focus:border-blue-500 outline-none font-mono",value:ek.phone||"",onChange:e=>eC({...ek,phone:e.target.value})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-xs text-slate-400 block mb-1",children:"Rank"}),(0,t.jsx)("select",{className:"w-full bg-[#15151a] border border-slate-700 rounded-lg p-3 text-white focus:border-blue-500 outline-none",value:ek.rank||"Rookie",onChange:e=>eC({...ek,rank:e.target.value}),children:["Rookie","Bronze","Silver","Gold","Platinum","Diamond","Grandmaster","Legend"].map(e=>(0,t.jsx)("option",{value:e,children:e},e))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-xs text-slate-400 block mb-1",children:"Party"}),(0,t.jsx)("input",{type:"text",className:"w-full bg-[#15151a] border border-slate-700 rounded-lg p-3 text-white focus:border-blue-500 outline-none",value:ek.party||"",onChange:e=>eC({...ek,party:e.target.value})})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-xs text-slate-400 block mb-1",children:"EXP"}),(0,t.jsx)("input",{type:"number",className:"w-full bg-[#15151a] border border-slate-700 rounded-lg p-3 text-white focus:border-blue-500 outline-none font-mono",value:ek.exp||0,onChange:e=>eC({...ek,exp:Number(e.target.value)})})]}),(0,t.jsx)("button",{disabled:eb,onClick:ez,className:"w-full bg-blue-600 text-white font-bold py-3 rounded-xl hover:bg-blue-500 disabled:opacity-50 flex justify-center shadow-lg shadow-blue-900/40 mt-4",children:eb?(0,t.jsx)(N.Loader2,{className:"animate-spin"}):"Save Changes"})]})}),em&&(0,t.jsx)(eB,{title:`Edit Database Member (${em._status})`,onClose:()=>eh(null),children:(0,t.jsxs)("div",{className:"space-y-4 max-h-[75vh] overflow-y-auto pr-2 custom-scrollbar",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-xs text-slate-400 block mb-1",children:"Display Name"}),(0,t.jsx)("input",{type:"text",className:"w-full bg-[#15151a] border border-slate-700 rounded-lg p-3 text-white focus:border-blue-500 outline-none",value:em.displayName||"",onChange:e=>eh({...em,displayName:e.target.value})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-xs text-slate-400 block mb-1",children:"Codename"}),(0,t.jsx)("input",{type:"text",className:"w-full bg-[#15151a] border border-slate-700 rounded-lg p-3 text-white focus:border-blue-500 outline-none",value:em.codename||"",onChange:e=>eh({...em,codename:e.target.value})})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-xs text-slate-400 block mb-1",children:"Phone (ID)"}),(0,t.jsx)("input",{type:"text",className:"w-full bg-[#15151a] border border-slate-700 rounded-lg p-3 text-white focus:border-blue-500 outline-none font-mono",value:em.phone||"",disabled:em.isClaimed,onChange:e=>eh({...em,phone:e.target.value})}),em.isClaimed&&(0,t.jsx)("p",{className:"text-[10px] text-slate-500 mt-1",children:"Claimed user phone cannot be changed directly here."})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-xs text-slate-400 block mb-1",children:"Rank"}),(0,t.jsx)("select",{className:"w-full bg-[#15151a] border border-slate-700 rounded-lg p-3 text-white focus:border-blue-500 outline-none",value:em.rank||"Rookie",onChange:e=>eh({...em,rank:e.target.value}),children:["Rookie","Bronze","Silver","Gold","Platinum","Diamond","Grandmaster","Legend"].map(e=>(0,t.jsx)("option",{value:e,children:e},e))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-xs text-slate-400 block mb-1",children:"Party"}),(0,t.jsx)("input",{type:"text",className:"w-full bg-[#15151a] border border-slate-700 rounded-lg p-3 text-white focus:border-blue-500 outline-none",value:em.party||"",onChange:e=>eh({...em,party:e.target.value})})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{className:"col-span-1",children:[(0,t.jsx)("label",{className:"text-xs text-slate-400 block mb-1",children:"EXP"}),(0,t.jsx)("input",{type:"number",className:"w-full bg-[#15151a] border border-slate-700 rounded-lg p-3 text-white focus:border-blue-500 outline-none font-mono",value:em.exp||0,onChange:e=>eh({...em,exp:e.target.value})})]}),(0,t.jsxs)("div",{className:"col-span-1",children:[(0,t.jsx)("label",{className:"text-xs text-slate-400 block mb-1",children:"Rebirths"}),(0,t.jsx)("input",{type:"number",className:"w-full bg-[#15151a] border border-slate-700 rounded-lg p-3 text-white focus:border-amber-500 outline-none font-mono",value:em.rebirthCount||0,onChange:e=>eh({...em,rebirthCount:e.target.value})})]}),(0,t.jsxs)("div",{className:"col-span-1",children:[(0,t.jsx)("label",{className:"text-xs text-slate-400 block mb-1",children:"Multiplier"}),(0,t.jsx)("input",{type:"number",className:"w-full bg-[#15151a] border border-slate-700 rounded-lg p-3 text-white focus:border-amber-500 outline-none font-mono",value:em.expMultiplier||1,onChange:e=>eh({...em,expMultiplier:e.target.value})})]})]}),(0,t.jsx)("button",{disabled:ec,onClick:eq,className:"w-full bg-gradient-to-r from-indigo-600 to-purple-600 text-white font-bold py-3 rounded-xl hover:from-indigo-500 hover:to-purple-500 disabled:opacity-50 flex justify-center shadow-lg transform active:scale-[0.98] transition-all",children:ec?(0,t.jsx)(N.Loader2,{className:"animate-spin"}):"Save to Database"})]})}),"reset_user_test"===ep&&(0,t.jsx)(eB,{title:"Danger Zone: Reset User",onClose:()=>{eu(null),ej({})},children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"bg-red-500/10 border border-red-500/20 text-red-200 p-4 rounded-xl text-xs",children:[(0,t.jsxs)("h3",{className:"font-bold flex items-center gap-2 mb-2",children:[(0,t.jsx)(x.AlertCircle,{className:"w-4 h-4 text-red-500"})," WARNING"]}),(0,t.jsx)("p",{children:"This will permanently DELETE the user from the database. It is intended for testing the registration flow repeatedly."})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-xs text-slate-400 block mb-1",children:"Target Phone Number"}),(0,t.jsx)("input",{type:"text",className:"w-full bg-[#15151a] border border-slate-700 rounded-lg p-3 text-white focus:border-red-500 outline-none font-mono",placeholder:"08xxxxxxxx",value:ef.phone||"",onChange:e=>ej({...ef,phone:e.target.value})})]}),(0,t.jsx)("button",{disabled:eb,onClick:async()=>{if(!ef.phone)return alert("Phone number required");if(confirm(`Confirm DELETE user ${ef.phone}?`)){eg(!0);try{let e=(0,r.query)((0,r.collection)(i.db,"users"),(0,r.where)("phone","==",ef.phone.trim())),t=await (0,r.getDocs)(e);t.empty&&console.log("No claimed user found."),t.forEach(async e=>{await (0,r.deleteDoc)(e.ref),console.log(`Deleted user ${e.id}`)}),await (0,r.deleteDoc)((0,r.doc)(i.db,"legacy_users",ef.phone.trim())),alert("User reset complete! They can register again now."),eu(null),ej({})}catch(e){alert("Error: "+e.message)}finally{eg(!1)}}},className:"w-full bg-red-600 text-white font-bold py-3 rounded-xl hover:bg-red-500 disabled:opacity-50 flex justify-center shadow-lg shadow-red-900/40",children:eb?(0,t.jsx)(N.Loader2,{className:"animate-spin"}):"DELETE USER"})]})}),eD&&(0,t.jsx)(eB,{title:"Payment Verification",onClose:()=>eM(null),children:(0,t.jsxs)("div",{className:"flex flex-col items-center",children:[(0,t.jsx)("img",{src:eD,className:"max-w-full max-h-[70vh] rounded-lg border border-slate-700 mb-4"}),(0,t.jsx)("a",{href:eD,download:"slip.jpg",className:"text-blue-400 text-sm hover:underline",children:"Download Original"})]})}),eS&&(0,t.jsx)(eB,{title:`Edit ${el}`,onClose:()=>e_(null),children:(0,t.jsxs)("div",{className:"space-y-4 max-h-[70vh] overflow-y-auto pr-2 custom-scrollbar",children:[Object.keys(eS.data).map(e=>(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-xs text-slate-400 block mb-1",children:e}),(0,t.jsx)("textarea",{className:"w-full bg-[#15151a] border border-slate-700 rounded-lg p-3 text-white focus:border-blue-500 outline-none min-h-[40px]",rows:1,value:eS.data[e],onChange:t=>{let s={...eS.data,[e]:t.target.value};e_({...eS,data:s})}})]},e)),(0,t.jsx)("button",{disabled:eb,onClick:eG,className:"w-full bg-blue-600 text-white font-bold py-3 rounded-xl hover:bg-blue-500 disabled:opacity-50 flex justify-center shadow-lg shadow-blue-900/40 mt-4",children:eb?(0,t.jsx)(N.Loader2,{className:"animate-spin"}):"Save Changes"})]})}),eD&&(0,t.jsx)("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/95 p-4 animate-in fade-in duration-200",children:(0,t.jsxs)("div",{className:"relative max-w-2xl w-full",children:[(0,t.jsxs)("button",{onClick:()=>eM(null),className:"absolute -top-12 right-0 text-white flex items-center gap-2 hover:text-slate-300 transition-colors",children:[(0,t.jsx)(j.X,{className:"w-6 h-6"})," Close"]}),(0,t.jsx)("div",{className:"bg-[#1a1a1f] p-2 rounded-2xl border border-slate-700 shadow-2xl overflow-hidden",children:(0,t.jsx)("img",{src:eD,alt:"Payment Slip",className:"w-full h-auto rounded-xl max-h-[80vh] object-contain"})})]})})]}):(0,t.jsx)("div",{className:"min-h-screen bg-[#1e1e24] flex items-center justify-center p-4",children:(0,t.jsxs)("div",{className:"max-w-md w-full bg-[#1e1e24] border border-red-900/50 rounded-2xl p-8 text-center animate-in shake",children:[(0,t.jsx)("div",{className:"w-16 h-16 bg-red-900/20 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,t.jsx)(C.Lock,{className:"w-8 h-8 text-red-500"})}),(0,t.jsx)("h1",{className:"text-xl font-bold text-white mb-2",children:"Access Denied"}),(0,t.jsxs)("p",{className:"text-slate-400 text-sm mb-6",children:["The account ",(0,t.jsx)("span",{className:"text-white font-mono bg-slate-800 px-1 rounded",children:q.email})," is not authorized to access this portal."]}),(0,t.jsxs)("div",{className:"flex gap-3 justify-center",children:[(0,t.jsx)("button",{onClick:V,className:"text-sm text-slate-400 hover:text-white underline",children:"Sign Out"}),(0,t.jsx)("button",{onClick:()=>X.push("/dashboard"),className:"text-sm bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-500",children:"Go to Dashboard"})]})]})}):(0,t.jsx)("div",{className:"min-h-screen bg-[#1e1e24] flex items-center justify-center p-4",children:(0,t.jsxs)("div",{className:"max-w-md w-full bg-[#2b2d42] border border-slate-700 rounded-2xl p-8 shadow-2xl text-center animate-in zoom-in-50 duration-300",children:[(0,t.jsx)("div",{className:"w-16 h-16 bg-blue-600 rounded-2xl flex items-center justify-center mx-auto mb-6 shadow-lg shadow-blue-500/30",children:(0,t.jsx)(n.Shield,{className:"w-8 h-8 text-white"})}),(0,t.jsx)("h1",{className:"text-2xl font-bold text-white mb-2",children:"Admin Portal"}),(0,t.jsx)("p",{className:"text-slate-400 text-sm mb-8",children:"Secured Access Area. Please verify your identity."}),(0,t.jsxs)("button",{onClick:H,className:"w-full bg-white text-slate-900 font-bold py-3 px-4 rounded-xl flex items-center justify-center gap-3 hover:bg-slate-100 transition-colors",children:[(0,t.jsxs)("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[(0,t.jsx)("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),(0,t.jsx)("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),(0,t.jsx)("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),(0,t.jsx)("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Sign in with Google"]})]})})}e.s(["default",()=>q],26869)}]);