(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,8358,e=>{"use strict";let t=(0,e.i(27162).default)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);e.s(["Shield",()=>t],8358)},94556,e=>{"use strict";e.i(18355);var t=e.i(70395),s=e.i(7951),r=e.i(81291),a=e.i(1805),i=e.i(53636),l=s,o=e.i(18760);class n extends l.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=this.props.sizeRef.current;e.height=t.offsetHeight||0,e.width=t.offsetWidth||0,e.top=t.offsetTop,e.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function d({children:e,isPresent:s}){let r=(0,l.useId)(),a=(0,l.useRef)(null),i=(0,l.useRef)({width:0,height:0,top:0,left:0}),{nonce:d}=(0,l.useContext)(o.MotionConfigContext);return(0,l.useInsertionEffect)(()=>{let{width:e,height:t,top:l,left:o}=i.current;if(s||!a.current||!e||!t)return;a.current.dataset.motionPopId=r;let n=document.createElement("style");return d&&(n.nonce=d),document.head.appendChild(n),n.sheet&&n.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${e}px !important;
            height: ${t}px !important;
            top: ${l}px !important;
            left: ${o}px !important;
          }
        `),()=>{document.head.removeChild(n)}},[s]),(0,t.jsx)(n,{isPresent:s,childRef:a,sizeRef:i,children:l.cloneElement(e,{ref:a})})}let c=({children:e,initial:r,isPresent:l,onExitComplete:o,custom:n,presenceAffectsLayout:c,mode:u})=>{let h=(0,a.useConstant)(m),p=(0,s.useId)(),x=(0,s.useCallback)(e=>{for(let t of(h.set(e,!0),h.values()))if(!t)return;o&&o()},[h,o]),g=(0,s.useMemo)(()=>({id:p,initial:r,isPresent:l,custom:n,onExitComplete:x,register:e=>(h.set(e,!1),()=>h.delete(e))}),c?[Math.random(),x]:[l,x]);return(0,s.useMemo)(()=>{h.forEach((e,t)=>h.set(t,!1))},[l]),s.useEffect(()=>{l||h.size||!o||o()},[l]),"popLayout"===u&&(e=(0,t.jsx)(d,{isPresent:l,children:e})),(0,t.jsx)(i.PresenceContext.Provider,{value:g,children:e})};function m(){return new Map}var u=e.i(71714);let h=e=>e.key||"";function p(e){let t=[];return s.Children.forEach(e,e=>{(0,s.isValidElement)(e)&&t.push(e)}),t}var x=e.i(21753);let g=({children:e,custom:i,initial:l=!0,onExitComplete:o,presenceAffectsLayout:n=!0,mode:d="sync",propagate:m=!1})=>{let[g,f]=(0,u.usePresence)(m),b=(0,s.useMemo)(()=>p(e),[e]),w=m&&!g?[]:b.map(h),y=(0,s.useRef)(!0),v=(0,s.useRef)(b),j=(0,a.useConstant)(()=>new Map),[k,N]=(0,s.useState)(b),[P,A]=(0,s.useState)(b);(0,x.useIsomorphicLayoutEffect)(()=>{y.current=!1,v.current=b;for(let e=0;e<P.length;e++){let t=h(P[e]);w.includes(t)?j.delete(t):!0!==j.get(t)&&j.set(t,!1)}},[P,w.length,w.join("-")]);let C=[];if(b!==k){let e=[...b];for(let t=0;t<P.length;t++){let s=P[t],r=h(s);w.includes(r)||(e.splice(t,0,s),C.push(s))}"wait"===d&&C.length&&(e=C),A(p(e)),N(b);return}let{forceRender:S}=(0,s.useContext)(r.LayoutGroupContext);return(0,t.jsx)(t.Fragment,{children:P.map(e=>{let s=h(e),r=(!m||!!g)&&(b===P||w.includes(s));return(0,t.jsx)(c,{isPresent:r,initial:(!y.current||!!l)&&void 0,custom:r?void 0:i,presenceAffectsLayout:n,mode:d,onExitComplete:r?void 0:()=>{if(!j.has(s))return;j.set(s,!0);let e=!0;j.forEach(t=>{t||(e=!1)}),e&&(null==S||S(),A(v.current),m&&(null==f||f()),o&&o())},children:e},s)})})};e.s(["AnimatePresence",()=>g],94556)},89862,e=>{"use strict";let t=(0,e.i(27162).default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);e.s(["AlertCircle",()=>t],89862)},45600,e=>{"use strict";let t=(0,e.i(27162).default)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);e.s(["Lock",()=>t],45600)},96967,e=>{"use strict";let t=(0,e.i(27162).default)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);e.s(["Check",()=>t],96967)},81461,e=>{"use strict";var t=e.i(70395),s=e.i(37779),r=e.i(94556),a=e.i(8358),i=e.i(6517),l=e.i(49793),o=e.i(27162);let n=(0,o.default)("link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);var d=e.i(89862);let c=(0,o.default)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);var m=e.i(55541),u=e.i(7951),h=e.i(58101),p=e.i(50339);e.i(85670);var x=e.i(25681);let g=[{id:"starter-grass",name:"Bulbasaur",type:"grass",img:"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/other/official-artwork/1.png"},{id:"starter-fire",name:"Charmander",type:"fire",img:"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/other/official-artwork/4.png"},{id:"starter-water",name:"Squirtle",type:"water",img:"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/other/official-artwork/7.png"}],f=[{id:"silver-1",name:"Ivysaur",type:"grass",img:"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/other/official-artwork/2.png"},{id:"silver-2",name:"Charmeleon",type:"fire",img:"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/other/official-artwork/5.png"},{id:"silver-3",name:"Wartortle",type:"water",img:"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/other/official-artwork/8.png"}],b=[{id:"gold-1",name:"Venusaur",type:"grass",img:"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/other/official-artwork/3.png"},{id:"gold-2",name:"Charizard",type:"fire",img:"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/other/official-artwork/6.png"},{id:"gold-3",name:"Blastoise",type:"water",img:"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/other/official-artwork/9.png"}],w=[{id:"legend-1",name:"Mewtwo",type:"psychic",img:"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/other/official-artwork/150.png"},{id:"legend-2",name:"Mew",type:"psychic",img:"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/other/official-artwork/151.png"},{id:"legend-3",name:"Rayquaza",type:"dragon",img:"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/other/official-artwork/384.png"}];var y=e.i(96967),v=e.i(45600);function j({currentAvatarId:e,onSelect:s,userRank:r}){let{user:a}=(0,m.useAuth)(),[i,l]=(0,u.useState)(e),[o,n]=(0,u.useState)(!1),d=async()=>{if(i&&a){n(!0);try{let e=[...g,...f,...b,...w].find(e=>e.id===i);e&&(await (0,x.updateDoc)((0,x.doc)(p.db,"users",a.uid),{avatarId:e.id,photoURL:e.img}),s(e.img,e.id))}catch(e){console.error(e)}finally{n(!1)}}},c=(r?.toLowerCase(),{Starter:g,Silver:f,Gold:b,Legend:w});return(0,t.jsxs)("div",{className:"bg-white rounded-3xl p-6 shadow-2xl max-w-md w-full max-h-[80vh] overflow-y-auto custom-scrollbar",children:[(0,t.jsx)("h2",{className:"text-2xl font-black text-center text-[#1F2E4A] mb-2",children:"Choose Your Avatar"}),(0,t.jsx)("p",{className:"text-center text-gray-400 text-xs mb-6",children:"Unlock more as you rank up!"}),(0,t.jsx)("div",{className:"space-y-6",children:Object.entries(c).map(([e,s])=>{let a,o=(a=r?.toLowerCase()||"rookie",!!("Starter"===e||"Silver"===e&&["silver","gold","platinum","diamond","master","grandmaster","legend"].some(e=>a.includes(e))||"Gold"===e&&["gold","platinum","diamond","master","grandmaster","legend"].some(e=>a.includes(e))||"Legend"===e&&["legend"].some(e=>a.includes(e))));return(0,t.jsxs)("div",{className:`relative ${!o?"opacity-60 grayscale":""}`,children:[(0,t.jsxs)("h3",{className:"font-bold text-sm text-gray-500 mb-3 uppercase tracking-wider flex items-center gap-2",children:[e," ",!o&&(0,t.jsx)(v.Lock,{className:"w-3 h-3"})]}),(0,t.jsx)("div",{className:"grid grid-cols-3 gap-3",children:s.map(e=>(0,t.jsxs)("button",{disabled:!o,onClick:()=>l(e.id),className:`relative group p-2 rounded-2xl border-2 transition-all ${i===e.id?"border-blue-500 bg-blue-50":"border-gray-100 bg-gray-50 hover:border-blue-200"}`,children:[(0,t.jsx)("img",{src:e.img,className:"w-full h-auto drop-shadow-md group-hover:scale-110 transition-transform"}),i===e.id&&(0,t.jsx)("div",{className:"absolute top-1 right-1 bg-blue-500 text-white rounded-full p-0.5",children:(0,t.jsx)(y.Check,{className:"w-3 h-3"})})]},e.id))})]},e)})}),(0,t.jsx)("div",{className:"sticky bottom-0 bg-white pt-4 mt-6 border-t border-gray-100",children:(0,t.jsx)("button",{disabled:!i||o,onClick:d,className:"w-full bg-[#4A90E2] hover:bg-[#357ABD] text-white font-bold py-3 rounded-xl shadow-lg shadow-blue-200 transition-all disabled:opacity-50",children:o?"Saving...":"Confirm Selection"})})]})}function k(){let{user:e,loading:o,signOut:g}=(0,m.useAuth)(),f=(0,h.useRouter)(),[b,w]=(0,u.useState)(!1),[y,v]=(0,u.useState)(null),[k,N]=(0,u.useState)("Rookie"),[P,A]=(0,u.useState)(0),[C,S]=(0,u.useState)("No Party"),[E,R]=(0,u.useState)(!1),[I,L]=(0,u.useState)(""),[M,F]=(0,u.useState)(""),[D,U]=(0,u.useState)(""),[q,z]=(0,u.useState)(!1),[B,T]=(0,u.useState)(null);(0,u.useEffect)(()=>{if(w(!0),o||e||f.push("/"),!e)return;let t=(0,x.onSnapshot)((0,x.doc)(p.db,"users",e.uid),e=>{if(e.exists()){let t=e.data();v(t),N(t.rank||"Rookie"),A(t.exp||0),S(t.party||"No Party")}});return(async()=>{let t=await (0,x.getDoc)((0,x.doc)(p.db,"claim_requests",e.uid));t.exists()&&T(t.data())})(),()=>t()},[e,o,f]);let X=async t=>{t.preventDefault(),F(""),U(""),z(!0);try{if(!e)return;let t=I.trim().replace(/-/g,"");if(!t||t.length<9)throw Error("Invalid phone number");let s=(0,x.doc)(p.db,"legacy_users",t),r=await (0,x.getDoc)(s);if(!r.exists())throw Error("Phone number not found in legacy system (or already claimed).");let a=r.data();await (0,x.setDoc)((0,x.doc)(p.db,"claim_requests",e.uid),{uid:e.uid,email:e.email,currentDisplayName:e.displayName,profileImage:e.photoURL,requestedPhone:t,legacyData:a,status:"pending",createdAt:new Date().toISOString()}),T({requestedPhone:t,status:"pending"}),U("Verification request sent! Please wait for Admin approval."),setTimeout(()=>R(!1),2e3)}catch(e){F(e.message)}finally{z(!1)}};if(!b||o||!e)return(0,t.jsx)("div",{className:"min-h-screen bg-[#F0F2F5] flex items-center justify-center",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#7AC0E7]"})});let $="Legend"===k||"Grandmaster"===k?200:"Diamond"===k?120:"Platinum"===k?75:"Gold"===k?50:"Silver"===k?30:15,G=Math.min(P/$*100,100);return(0,t.jsxs)("div",{className:"min-h-screen bg-[#F0F2F5] pb-24 relative font-poppins",children:[(0,t.jsxs)("div",{className:"h-56 bg-[#1F2E4A] rounded-b-[3rem] relative overflow-hidden shadow-2xl",children:[(0,t.jsx)("div",{className:"absolute top-0 left-0 w-full h-full opacity-10 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')]"}),(0,t.jsx)("button",{onClick:()=>g(),className:"absolute top-6 right-6 bg-white/10 hover:bg-white/20 backdrop-blur-md px-4 py-1.5 rounded-full text-xs font-bold text-white border border-white/20 transition-all",children:"Logout"})]}),(0,t.jsxs)("div",{className:"px-6 -mt-24",children:[(0,t.jsx)(s.motion.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},className:"bg-white rounded-[2rem] p-6 shadow-xl border-4 border-white relative z-10",children:(0,t.jsxs)("div",{className:"flex flex-col items-center",children:[(0,t.jsxs)("div",{className:"w-28 h-28 rounded-full bg-gradient-to-tr from-[#FFD700] to-[#FFB300] border-[6px] border-white shadow-lg flex items-center justify-center -mt-20 mb-4 relative z-20 overflow-hidden",children:[y?.photoURL||e?.photoURL?(0,t.jsx)("img",{src:y?.photoURL||e?.photoURL,alt:"User Avatar",className:"w-full h-full object-cover"}):(0,t.jsx)("span",{className:"text-5xl",children:"ðŸ¦‰"}),(0,t.jsx)("div",{className:"absolute bottom-0 w-full bg-[#4A90E2] text-white text-[10px] font-bold py-0.5 text-center tracking-wider",children:"MEMBER"})]}),(0,t.jsx)("h2",{className:"text-2xl font-black text-[#1F2E4A] tracking-tight",children:e.displayName}),(0,t.jsxs)("div",{className:"flex items-center gap-2 mt-2 mb-6",children:[(0,t.jsxs)("span",{className:`px-4 py-1.5 rounded-full text-xs font-bold border flex items-center gap-1.5 shadow-sm
                                ${"Rookie"===k?"bg-gray-100 text-gray-500 border-gray-200":"Gold"===k?"bg-yellow-50 text-yellow-600 border-yellow-200":"bg-blue-50 text-blue-600 border-blue-200"}`,children:[(0,t.jsx)(a.Shield,{className:"w-3.5 h-3.5 fill-current"}),k.toUpperCase()]}),(0,t.jsxs)("span",{className:"px-4 py-1.5 bg-blue-50 text-blue-500 rounded-full text-xs font-bold border border-blue-100 flex items-center gap-1.5 shadow-sm",children:[(0,t.jsx)(l.Users,{className:"w-3.5 h-3.5"}),C||"No Party"]})]}),(0,t.jsx)("div",{className:"w-full bg-gray-100 h-5 rounded-full overflow-hidden relative mb-2 shadow-inner",children:(0,t.jsx)(s.motion.div,{initial:{width:0},animate:{width:`${G}%`},transition:{delay:.2,duration:1,type:"spring"},className:"h-full bg-gradient-to-r from-[#4A90E2] to-[#357ABD] rounded-full relative",children:(0,t.jsx)("div",{className:"absolute top-0 left-0 w-full h-full bg-white/20 animate-pulse"})})}),(0,t.jsxs)("div",{className:"flex justify-between w-full text-xs font-bold text-gray-400 mb-6 px-1",children:[(0,t.jsxs)("span",{children:["EXP ",P]}),(0,t.jsxs)("span",{children:["Top ",$]})]}),0===P&&!B&&(0,t.jsxs)("div",{className:"w-full grid grid-cols-2 gap-3 mb-6",children:[(0,t.jsxs)(s.motion.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>R(!0),className:"bg-gradient-to-br from-orange-400 to-pink-500 text-white p-4 rounded-2xl shadow-lg shadow-orange-500/20 flex flex-col items-center justify-center gap-2 h-32 group",children:[(0,t.jsx)("div",{className:"bg-white/20 p-3 rounded-full mb-1",children:(0,t.jsx)(n,{className:"w-6 h-6 text-white"})}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("p",{className:"font-bold text-sm",children:"Link Old Account"}),(0,t.jsx)("p",{className:"text-[9px] text-white/90 font-medium opacity-80 mt-1",children:"I was a member"})]})]}),(0,t.jsxs)(s.motion.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>f.push("/register"),className:"bg-gradient-to-br from-indigo-500 to-purple-600 text-white p-4 rounded-2xl shadow-lg shadow-indigo-500/20 flex flex-col items-center justify-center gap-2 h-32 group",children:[(0,t.jsx)("div",{className:"bg-white/20 p-3 rounded-full mb-1",children:(0,t.jsx)(l.Users,{className:"w-6 h-6 text-white"})}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("p",{className:"font-bold text-sm",children:"New Member"}),(0,t.jsx)("p",{className:"text-[9px] text-white/90 font-medium opacity-80 mt-1",children:"Register new ID"})]})]})]}),B&&(0,t.jsxs)("div",{className:"w-full bg-yellow-50 border border-yellow-200 p-4 rounded-2xl flex items-center gap-3 mb-6 shadow-sm",children:[(0,t.jsx)("div",{className:"bg-yellow-100 p-2 rounded-full text-yellow-600 animate-pulse",children:(0,t.jsx)(c,{className:"w-5 h-5"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-bold text-sm text-[#1F2E4A]",children:"Verification Pending"}),(0,t.jsxs)("p",{className:"text-[10px] text-gray-500",children:["Processing phone: ",B.requestedPhone]}),(0,t.jsx)("p",{className:"text-[10px] text-gray-400 mt-0.5",children:"Please wait for Admin approval."})]})]})]})}),(0,t.jsxs)("div",{className:"mt-8 mb-4",children:[(0,t.jsxs)("h3",{className:"text-lg font-black text-[#1F2E4A] mb-4 flex items-center gap-2",children:[(0,t.jsx)(i.Zap,{className:"w-5 h-5 text-yellow-500 fill-current"}),"Active Quests"]}),(0,t.jsxs)("div",{className:"bg-white p-6 rounded-2xl border-2 border-dashed border-gray-200 text-center",children:[(0,t.jsx)("p",{className:"text-gray-400 text-sm font-bold",children:"No active quests available."}),(0,t.jsx)("p",{className:"text-gray-300 text-xs mt-1",children:"Check back later at 12:00 PM"})]})]})]}),(0,t.jsx)(r.AnimatePresence,{children:E&&(0,t.jsx)(s.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-6 h-screen",children:(0,t.jsxs)(s.motion.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},className:"bg-white w-full max-w-sm rounded-3xl p-6 shadow-2xl",children:[(0,t.jsx)("h3",{className:"text-xl font-black text-[#1F2E4A] mb-2",children:"Claim Your Data"}),(0,t.jsx)("p",{className:"text-gray-500 text-xs mb-6",children:"Request admin approval to verify ownership of this phone number."}),(0,t.jsxs)("form",{onSubmit:X,children:[(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{className:"text-[10px] uppercase font-bold text-gray-400 tracking-wider ml-1 mb-1 block",children:"Phone Number"}),(0,t.jsx)("input",{type:"tel",placeholder:"08X-XXX-XXXX",className:"w-full bg-gray-50 border border-gray-200 rounded-xl p-4 text-[#1F2E4A] font-bold outline-none focus:border-blue-500 transition-colors",value:I,onChange:e=>L(e.target.value)})]}),M&&(0,t.jsxs)("div",{className:"bg-red-50 text-red-500 text-xs p-3 rounded-xl mb-4 flex items-center gap-2 font-bold",children:[(0,t.jsx)(d.AlertCircle,{className:"w-4 h-4 shrink-0"}),M]}),D&&(0,t.jsxs)("div",{className:"bg-green-50 text-green-500 text-xs p-3 rounded-xl mb-4 flex items-center gap-2 font-bold",children:[(0,t.jsx)(i.Zap,{className:"w-4 h-4 shrink-0 fill-current"}),D]}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)("button",{type:"button",onClick:()=>R(!1),className:"flex-1 py-3 rounded-xl font-bold text-gray-500 bg-gray-100 hover:bg-gray-200 transition-colors",children:"Cancel"}),(0,t.jsx)("button",{disabled:q||!!D,className:"flex-1 py-3 rounded-xl font-bold text-white bg-[#4A90E2] hover:bg-[#357ABD] shadow-lg shadow-blue-200 transition-all disabled:opacity-70",children:q?"Checking...":"Send Request"})]})]})]})})}),(0,t.jsx)(r.AnimatePresence,{children:y&&!y.avatarId&&(0,t.jsx)(s.motion.div,{initial:{opacity:0},animate:{opacity:1},className:"fixed inset-0 bg-black/80 backdrop-blur-md z-[60] flex items-center justify-center p-6 h-screen",children:(0,t.jsx)(j,{userRank:k,onSelect:()=>{}})})})]})}e.s(["default",()=>k],81461)}]);