{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/chawanutcharoenthammachoke/Documents/Cursor/up-level-leaderboard/up-level-web-app/src/components/MobileNav.tsx"],"sourcesContent":["'use client';\n\nimport { usePathname } from 'next/navigation';\nimport Link from 'next/link';\nimport { Home, Map, ScrollText, Users, ShoppingBag } from 'lucide-react';\nimport { motion } from 'framer-motion';\n\nexport default function MobileNav() {\n    const pathname = usePathname();\n\n    // Hide nav on login page and admin routes\n    if (pathname === '/' || pathname?.startsWith('/admin')) return null;\n\n    const navItems = [\n        { name: 'Home', href: '/dashboard', icon: Home, color: 'text-sky-400' },\n        { name: 'Map', href: '/map', icon: Map, color: 'text-green-400' },\n        { name: 'Quests', href: '/quests', icon: ScrollText, color: 'text-yellow-400' },\n        { name: 'Party', href: '/party', icon: Users, color: 'text-pink-400' },\n        { name: 'Shop', href: '/shop', icon: ShoppingBag, color: 'text-purple-400' },\n    ];\n\n    return (\n        <div className=\"fixed bottom-0 left-0 w-full z-50 px-4 pb-4 pt-2\">\n            <div className=\"glass-card flex justify-around items-center py-3 px-2 max-w-md mx-auto border-none bg-white/10 backdrop-blur-xl shadow-lg ring-1 ring-white/20 rounded-3xl\">\n                {navItems.map((item) => {\n                    const isActive = pathname === item.href;\n                    return (\n                        <Link\n                            key={item.name}\n                            href={item.href}\n                            className=\"relative flex flex-col items-center gap-1 min-w-[60px]\"\n                        >\n                            {isActive && (\n                                <motion.div\n                                    layoutId=\"activeTab\"\n                                    className=\"absolute -top-3 w-10 h-10 bg-white/10 rounded-full blur-md\"\n                                    initial={{ opacity: 0 }}\n                                    animate={{ opacity: 1 }}\n                                    transition={{ duration: 0.3 }}\n                                />\n                            )}\n\n                            <div className={`p-2 rounded-xl transition-all duration-300 ${isActive ? 'bg-white/15 scale-110 shadow-inner' : 'hover:bg-white/5'}`}>\n                                <item.icon\n                                    className={`w-6 h-6 transition-all duration-300 ${isActive ? item.color : 'text-gray-400'}`}\n                                    strokeWidth={isActive ? 2.5 : 2}\n                                    fill={isActive ? \"currentColor\" : \"none\"}\n                                    fillOpacity={0.2}\n                                />\n                            </div>\n\n                            <span className={`text-[10px] font-bold tracking-wide transition-colors duration-300 ${isActive ? 'text-white' : 'text-gray-500'}`}>\n                                {item.name}\n                            </span>\n                        </Link>\n                    );\n                })}\n            </div>\n        </div>\n    );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;;;AALA;;;;;AAOe,SAAS;;IACpB,MAAM,WAAW,IAAA,sOAAW;IAE5B,0CAA0C;IAC1C,IAAI,aAAa,OAAO,UAAU,WAAW,WAAW,OAAO;IAE/D,MAAM,WAAW;QACb;YAAE,MAAM;YAAQ,MAAM;YAAc,MAAM,gSAAI;YAAE,OAAO;QAAe;QACtE;YAAE,MAAM;YAAO,MAAM;YAAQ,MAAM,4RAAG;YAAE,OAAO;QAAiB;QAChE;YAAE,MAAM;YAAU,MAAM;YAAW,MAAM,qTAAU;YAAE,OAAO;QAAkB;QAC9E;YAAE,MAAM;YAAS,MAAM;YAAU,MAAM,kSAAK;YAAE,OAAO;QAAgB;QACrE;YAAE,MAAM;YAAQ,MAAM;YAAS,MAAM,wTAAW;YAAE,OAAO;QAAkB;KAC9E;IAED,qBACI,+QAAC;QAAI,WAAU;kBACX,cAAA,+QAAC;YAAI,WAAU;sBACV,SAAS,GAAG,CAAC,CAAC;gBACX,MAAM,WAAW,aAAa,KAAK,IAAI;gBACvC,qBACI,+QAAC,4PAAI;oBAED,MAAM,KAAK,IAAI;oBACf,WAAU;;wBAET,0BACG,+QAAC,yRAAM,CAAC,GAAG;4BACP,UAAS;4BACT,WAAU;4BACV,SAAS;gCAAE,SAAS;4BAAE;4BACtB,SAAS;gCAAE,SAAS;4BAAE;4BACtB,YAAY;gCAAE,UAAU;4BAAI;;;;;;sCAIpC,+QAAC;4BAAI,WAAW,CAAC,2CAA2C,EAAE,WAAW,uCAAuC,oBAAoB;sCAChI,cAAA,+QAAC,KAAK,IAAI;gCACN,WAAW,CAAC,oCAAoC,EAAE,WAAW,KAAK,KAAK,GAAG,iBAAiB;gCAC3F,aAAa,WAAW,MAAM;gCAC9B,MAAM,WAAW,iBAAiB;gCAClC,aAAa;;;;;;;;;;;sCAIrB,+QAAC;4BAAK,WAAW,CAAC,mEAAmE,EAAE,WAAW,eAAe,iBAAiB;sCAC7H,KAAK,IAAI;;;;;;;mBAxBT,KAAK,IAAI;;;;;YA4B1B;;;;;;;;;;;AAIhB;GArDwB;;QACH,sOAAW;;;KADR"}},
    {"offset": {"line": 146, "column": 0}, "map": {"version":3,"sources":["file:///Users/chawanutcharoenthammachoke/Documents/Cursor/up-level-leaderboard/up-level-web-app/src/lib/firebase.ts"],"sourcesContent":["import { initializeApp, getApps, getApp } from \"firebase/app\";\nimport { getAuth } from \"firebase/auth\";\nimport { getFirestore } from \"firebase/firestore\";\n\nconst firebaseConfig = {\n    apiKey: process.env.NEXT_PUBLIC_FIREBASE_API_KEY,\n    authDomain: process.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN,\n    projectId: process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID,\n    storageBucket: process.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET,\n    messagingSenderId: process.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID,\n    appId: process.env.NEXT_PUBLIC_FIREBASE_APP_ID,\n    measurementId: process.env.NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID\n};\n\n// Initialize Firebase safely\nconst app = getApps().length > 0 ? getApp() : initializeApp(firebaseConfig);\nconst auth = getAuth(app);\nconst db = getFirestore(app);\n\n// Simple check to ensure keys are loaded\nif (!firebaseConfig.apiKey) {\n    console.error(\"Firebase API Keys are missing! Check .env.local\");\n}\n\nexport { app, auth, db };\n"],"names":[],"mappings":";;;;;;;;AAKY;AALZ;AAAA;AACA;AAAA;AACA;AAAA;;;;AAEA,MAAM,iBAAiB;IACnB,MAAM;IACN,UAAU;IACV,SAAS;IACT,aAAa;IACb,iBAAiB;IACjB,KAAK;IACL,aAAa;AACjB;AAEA,6BAA6B;AAC7B,MAAM,MAAM,IAAA,gQAAO,IAAG,MAAM,GAAG,IAAI,IAAA,+PAAM,MAAK,IAAA,sQAAa,EAAC;AAC5D,MAAM,OAAO,IAAA,0PAAO,EAAC;AACrB,MAAM,KAAK,IAAA,oQAAY,EAAC;AAExB,yCAAyC;AACzC,IAAI,CAAC,eAAe,MAAM,EAAE;IACxB,QAAQ,KAAK,CAAC;AAClB"}},
    {"offset": {"line": 189, "column": 0}, "map": {"version":3,"sources":["file:///Users/chawanutcharoenthammachoke/Documents/Cursor/up-level-leaderboard/up-level-web-app/src/context/AuthContext.tsx"],"sourcesContent":["'use client';\n\nimport { createContext, useContext, useEffect, useState } from 'react';\nimport {\n    onAuthStateChanged,\n    signInWithPopup,\n    GoogleAuthProvider,\n    FacebookAuthProvider,\n    createUserWithEmailAndPassword,\n    signInWithEmailAndPassword,\n    sendEmailVerification,\n    signOut as firebaseSignOut,\n    User\n} from 'firebase/auth';\nimport { auth, db } from '@/lib/firebase';\nimport { doc, getDoc, setDoc } from 'firebase/firestore';\n\ninterface AuthContextType {\n    user: User | null;\n    loading: boolean;\n    signInWithGoogle: () => Promise<void>;\n    signInWithFacebook: () => Promise<void>;\n    registerWithEmail: (email: string, pass: string, name: string) => Promise<User | undefined>;\n    loginWithEmail: (email: string, pass: string) => Promise<void>;\n    signOut: () => Promise<void>;\n}\n\nconst AuthContext = createContext<AuthContextType>({} as AuthContextType);\n\nexport const useAuth = () => useContext(AuthContext);\n\nexport const AuthContextProvider = ({ children }: { children: React.ReactNode }) => {\n    const [user, setUser] = useState<User | null>(null);\n    const [loading, setLoading] = useState(true);\n\n    useEffect(() => {\n        if (!auth) {\n            setLoading(false);\n            return;\n        }\n        const unsubscribe = onAuthStateChanged(auth, (currentUser) => {\n            setUser(currentUser);\n            setLoading(false);\n        });\n        return () => unsubscribe();\n    }, []);\n\n    const syncUserToFirestore = async (user: User, displayNameOverride?: string) => {\n        if (!db) return;\n        const userRef = doc(db, 'users', user.uid);\n        const userSnap = await getDoc(userRef);\n\n        if (!userSnap.exists()) {\n            await setDoc(userRef, {\n                uid: user.uid,\n                displayName: displayNameOverride || user.displayName || 'Adventurer',\n                email: user.email || '',\n                photoURL: user.photoURL || '',\n                rank: 'Rookie',\n                exp: 0,\n                coins: 100,\n                partyId: null,\n                createdAt: new Date(),\n                phone: null\n            });\n        }\n    };\n\n    const signInWithGoogle = async () => {\n        if (!auth) return;\n        const provider = new GoogleAuthProvider();\n        try {\n            const res = await signInWithPopup(auth, provider);\n            await syncUserToFirestore(res.user);\n        } catch (error: any) {\n            console.error(\"Google Login Error:\", error);\n            throw error;\n        }\n    };\n\n    const signInWithFacebook = async () => {\n        if (!auth) return;\n        // Standard Facebook Provider (Works perfectly with \"Consumer\" App Type)\n        const provider = new FacebookAuthProvider();\n\n        try {\n            const res = await signInWithPopup(auth, provider);\n            await syncUserToFirestore(res.user);\n        } catch (error: any) {\n            console.error(\"Facebook Login Error:\", error);\n            // Handle account exists with different credential error\n            if (error.code === 'auth/account-exists-with-different-credential') {\n                alert(\"อีเมลนี้ถูกใช้งานแล้วด้วยวิธีอื่น (เช่น Google หรือ Email) กรุณาล็อกอินด้วยวิธีนั้น\");\n            } else {\n                alert(\"Facebook Login Failed: \" + error.message);\n            }\n        }\n    };\n\n    const registerWithEmail = async (email: string, pass: string, name: string) => {\n        if (!auth) return;\n        const res = await createUserWithEmailAndPassword(auth, email, pass);\n        // Try to send verification, but don't block\n        try { await sendEmailVerification(res.user); } catch (e) { }\n        await syncUserToFirestore(res.user, name);\n        return res.user;\n    };\n\n    const loginWithEmail = async (email: string, pass: string) => {\n        if (!auth) return;\n        await signInWithEmailAndPassword(auth, email, pass);\n    };\n\n    const signOut = async () => {\n        if (!auth) return;\n        await firebaseSignOut(auth);\n        setUser(null);\n    };\n\n    return (\n        <AuthContext.Provider value={{\n            user, loading,\n            signInWithGoogle, signInWithFacebook,\n            registerWithEmail, loginWithEmail, signOut\n        }}>\n            {children}\n        </AuthContext.Provider>\n    );\n};\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;AAAA;AAWA;AACA;AAAA;;;AAfA;;;;;AA2BA,MAAM,4BAAc,IAAA,gQAAa,EAAkB,CAAC;AAE7C,MAAM,UAAU;;IAAM,OAAA,IAAA,6PAAU,EAAC;AAAW;GAAtC;AAEN,MAAM,sBAAsB,CAAC,EAAE,QAAQ,EAAiC;;IAC3E,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,2PAAQ,EAAc;IAC9C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,2PAAQ,EAAC;IAEvC,IAAA,4PAAS;yCAAC;YACN,IAAI,CAAC,mNAAI,EAAE;gBACP,WAAW;gBACX;YACJ;YACA,MAAM,cAAc,IAAA,qQAAkB,EAAC,mNAAI;6DAAE,CAAC;oBAC1C,QAAQ;oBACR,WAAW;gBACf;;YACA;iDAAO,IAAM;;QACjB;wCAAG,EAAE;IAEL,MAAM,sBAAsB,OAAO,MAAY;QAC3C,IAAI,CAAC,iNAAE,EAAE;QACT,MAAM,UAAU,IAAA,2PAAG,EAAC,iNAAE,EAAE,SAAS,KAAK,GAAG;QACzC,MAAM,WAAW,MAAM,IAAA,8PAAM,EAAC;QAE9B,IAAI,CAAC,SAAS,MAAM,IAAI;YACpB,MAAM,IAAA,8PAAM,EAAC,SAAS;gBAClB,KAAK,KAAK,GAAG;gBACb,aAAa,uBAAuB,KAAK,WAAW,IAAI;gBACxD,OAAO,KAAK,KAAK,IAAI;gBACrB,UAAU,KAAK,QAAQ,IAAI;gBAC3B,MAAM;gBACN,KAAK;gBACL,OAAO;gBACP,SAAS;gBACT,WAAW,IAAI;gBACf,OAAO;YACX;QACJ;IACJ;IAEA,MAAM,mBAAmB;QACrB,IAAI,CAAC,mNAAI,EAAE;QACX,MAAM,WAAW,IAAI,qQAAkB;QACvC,IAAI;YACA,MAAM,MAAM,MAAM,IAAA,kQAAe,EAAC,mNAAI,EAAE;YACxC,MAAM,oBAAoB,IAAI,IAAI;QACtC,EAAE,OAAO,OAAY;YACjB,QAAQ,KAAK,CAAC,uBAAuB;YACrC,MAAM;QACV;IACJ;IAEA,MAAM,qBAAqB;QACvB,IAAI,CAAC,mNAAI,EAAE;QACX,wEAAwE;QACxE,MAAM,WAAW,IAAI,uQAAoB;QAEzC,IAAI;YACA,MAAM,MAAM,MAAM,IAAA,kQAAe,EAAC,mNAAI,EAAE;YACxC,MAAM,oBAAoB,IAAI,IAAI;QACtC,EAAE,OAAO,OAAY;YACjB,QAAQ,KAAK,CAAC,yBAAyB;YACvC,wDAAwD;YACxD,IAAI,MAAM,IAAI,KAAK,iDAAiD;gBAChE,MAAM;YACV,OAAO;gBACH,MAAM,4BAA4B,MAAM,OAAO;YACnD;QACJ;IACJ;IAEA,MAAM,oBAAoB,OAAO,OAAe,MAAc;QAC1D,IAAI,CAAC,mNAAI,EAAE;QACX,MAAM,MAAM,MAAM,IAAA,iRAA8B,EAAC,mNAAI,EAAE,OAAO;QAC9D,4CAA4C;QAC5C,IAAI;YAAE,MAAM,IAAA,wQAAqB,EAAC,IAAI,IAAI;QAAG,EAAE,OAAO,GAAG,CAAE;QAC3D,MAAM,oBAAoB,IAAI,IAAI,EAAE;QACpC,OAAO,IAAI,IAAI;IACnB;IAEA,MAAM,iBAAiB,OAAO,OAAe;QACzC,IAAI,CAAC,mNAAI,EAAE;QACX,MAAM,IAAA,6QAA0B,EAAC,mNAAI,EAAE,OAAO;IAClD;IAEA,MAAM,UAAU;QACZ,IAAI,CAAC,mNAAI,EAAE;QACX,MAAM,IAAA,0PAAe,EAAC,mNAAI;QAC1B,QAAQ;IACZ;IAEA,qBACI,+QAAC,YAAY,QAAQ;QAAC,OAAO;YACzB;YAAM;YACN;YAAkB;YAClB;YAAmB;YAAgB;QACvC;kBACK;;;;;;AAGb;IAjGa;KAAA"}}]
}