(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,6004,e=>{"use strict";let t=(0,e.i(27162).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>t],6004)},37978,e=>{"use strict";let t=(0,e.i(27162).default)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);e.s(["CheckCircle2",()=>t],37978)},94556,e=>{"use strict";e.i(18355);var t=e.i(70395),s=e.i(7951),l=e.i(81291),a=e.i(1805),i=e.i(53636),r=s,n=e.i(18760);class o extends r.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=this.props.sizeRef.current;e.height=t.offsetHeight||0,e.width=t.offsetWidth||0,e.top=t.offsetTop,e.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function c({children:e,isPresent:s}){let l=(0,r.useId)(),a=(0,r.useRef)(null),i=(0,r.useRef)({width:0,height:0,top:0,left:0}),{nonce:c}=(0,r.useContext)(n.MotionConfigContext);return(0,r.useInsertionEffect)(()=>{let{width:e,height:t,top:r,left:n}=i.current;if(s||!a.current||!e||!t)return;a.current.dataset.motionPopId=l;let o=document.createElement("style");return c&&(o.nonce=c),document.head.appendChild(o),o.sheet&&o.sheet.insertRule(`
          [data-motion-pop-id="${l}"] {
            position: absolute !important;
            width: ${e}px !important;
            height: ${t}px !important;
            top: ${r}px !important;
            left: ${n}px !important;
          }
        `),()=>{document.head.removeChild(o)}},[s]),(0,t.jsx)(o,{isPresent:s,childRef:a,sizeRef:i,children:r.cloneElement(e,{ref:a})})}let d=({children:e,initial:l,isPresent:r,onExitComplete:n,custom:o,presenceAffectsLayout:d,mode:x})=>{let m=(0,a.useConstant)(u),h=(0,s.useId)(),p=(0,s.useCallback)(e=>{for(let t of(m.set(e,!0),m.values()))if(!t)return;n&&n()},[m,n]),f=(0,s.useMemo)(()=>({id:h,initial:l,isPresent:r,custom:o,onExitComplete:p,register:e=>(m.set(e,!1),()=>m.delete(e))}),d?[Math.random(),p]:[r,p]);return(0,s.useMemo)(()=>{m.forEach((e,t)=>m.set(t,!1))},[r]),s.useEffect(()=>{r||m.size||!n||n()},[r]),"popLayout"===x&&(e=(0,t.jsx)(c,{isPresent:r,children:e})),(0,t.jsx)(i.PresenceContext.Provider,{value:f,children:e})};function u(){return new Map}var x=e.i(71714);let m=e=>e.key||"";function h(e){let t=[];return s.Children.forEach(e,e=>{(0,s.isValidElement)(e)&&t.push(e)}),t}var p=e.i(21753);let f=({children:e,custom:i,initial:r=!0,onExitComplete:n,presenceAffectsLayout:o=!0,mode:c="sync",propagate:u=!1})=>{let[f,b]=(0,x.usePresence)(u),y=(0,s.useMemo)(()=>h(e),[e]),g=u&&!f?[]:y.map(m),j=(0,s.useRef)(!0),v=(0,s.useRef)(y),w=(0,a.useConstant)(()=>new Map),[N,k]=(0,s.useState)(y),[C,E]=(0,s.useState)(y);(0,p.useIsomorphicLayoutEffect)(()=>{j.current=!1,v.current=y;for(let e=0;e<C.length;e++){let t=m(C[e]);g.includes(t)?w.delete(t):!0!==w.get(t)&&w.set(t,!1)}},[C,g.length,g.join("-")]);let S=[];if(y!==N){let e=[...y];for(let t=0;t<C.length;t++){let s=C[t],l=m(s);g.includes(l)||(e.splice(t,0,s),S.push(s))}"wait"===c&&S.length&&(e=S),E(h(e)),k(y);return}let{forceRender:T}=(0,s.useContext)(l.LayoutGroupContext);return(0,t.jsx)(t.Fragment,{children:C.map(e=>{let s=m(e),l=(!u||!!f)&&(y===C||g.includes(s));return(0,t.jsx)(d,{isPresent:l,initial:(!j.current||!!r)&&void 0,custom:l?void 0:i,presenceAffectsLayout:o,mode:c,onExitComplete:l?void 0:()=>{if(!w.has(s))return;w.set(s,!0);let e=!0;w.forEach(t=>{t||(e=!1)}),e&&(null==T||T(),E(v.current),u&&(null==b||b()),n&&n())},children:e},s)})})};e.s(["AnimatePresence",()=>f],94556)},21632,e=>{"use strict";let t=(0,e.i(27162).default)("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);e.s(["Send",()=>t],21632)},25664,e=>{"use strict";let t=(0,e.i(27162).default)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);e.s(["X",()=>t],25664)},24749,e=>{"use strict";let t=(0,e.i(27162).default)("scroll-text",[["path",{d:"M15 12h-5",key:"r7krc0"}],["path",{d:"M15 8h-5",key:"1khuty"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",key:"1ph1d7"}]]);e.s(["ScrollText",()=>t],24749)},10716,e=>{"use strict";var t=e.i(70395),s=e.i(7951),l=e.i(37779),a=e.i(94556),i=e.i(24749),r=e.i(37978);let n=(0,e.i(27162).default)("gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);var o=e.i(6004),c=e.i(21632),d=e.i(25664),u=e.i(50339);e.i(85670);var x=e.i(25681),m=e.i(55541);function h(){let{user:e}=(0,m.useAuth)(),[h,p]=(0,s.useState)([]),[f,b]=(0,s.useState)(!0),[y,g]=(0,s.useState)(null),[j,v]=(0,s.useState)(null),[w,N]=(0,s.useState)(""),[k,C]=(0,s.useState)(!1),[E,S]=(0,s.useState)("idle");(0,s.useEffect)(()=>{if(!e)return;let t=(0,x.onSnapshot)((0,x.doc)(u.db,"users",e.uid),e=>{e.exists()&&g(e.data())});return()=>t()},[e]),(0,s.useEffect)(()=>{let e=(0,x.onSnapshot)((0,x.doc)(u.db,"system_data","quests"),e=>{e.exists()&&p((e.data().items||[]).filter(e=>e.Quest||e.Title||e.Task||e["Quest Name"]).map((e,t)=>({id:t,title:e.Quest||e.Title||e.Task||e["Quest Name"]||"Untitled Quest",description:e.Description||e.Desc||e.Details||"",reward:e.Reward||e.Rewards||e.Exp||"10 EXP",type:e.Type||e.Category||"General",icon:e.Icon||"ðŸ“œ",target:e.Target||1,status:"active"}))),b(!1)});return()=>e()},[]);let T=async()=>{if(j&&e){C(!0);try{await (0,x.addDoc)((0,x.collection)(u.db,"quest_submissions"),{uid:e.uid,userEmail:e.email,userName:y?.displayName||e.displayName,questTitle:j.title,reward:j.reward,proof:w,status:"pending",timestamp:(0,x.serverTimestamp)()}),S("success"),setTimeout(()=>{v(null),S("idle"),N("")},2e3)}catch(e){console.error(e),S("error")}finally{C(!1)}}};return(0,t.jsxs)("div",{className:"min-h-screen bg-[#F0F2F5] pb-24 font-poppins",children:[(0,t.jsxs)("div",{className:"bg-[#7AC0E7] p-6 pb-12 rounded-b-[3rem] shadow-lg sticky top-0 z-10",children:[(0,t.jsxs)("h1",{className:"text-2xl font-black text-white mb-2 flex items-center gap-2",children:[(0,t.jsx)(i.ScrollText,{className:"w-6 h-6 fill-current text-blue-100"}),"QUEST BOARD"]}),(0,t.jsx)("p",{className:"text-blue-50 text-sm font-bold opacity-80",children:"Complete tasks to earn rewards!"})]}),(0,t.jsx)("div",{className:"px-4 -mt-6 space-y-4 relative z-20",children:f?(0,t.jsx)("div",{className:"flex justify-center pt-10",children:(0,t.jsx)(o.Loader2,{className:"w-8 h-8 animate-spin text-[#7AC0E7]"})}):0===h.length?(0,t.jsxs)("div",{className:"text-center py-10 text-slate-400",children:[(0,t.jsx)(i.ScrollText,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),(0,t.jsx)("p",{children:"No active quests at the moment."})]}):h.map((e,s)=>(0,t.jsxs)(l.motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.05*s},className:"bg-white p-5 rounded-2xl shadow-sm border-2 border-gray-100 relative overflow-hidden group hover:border-blue-200 transition-colors",children:[(0,t.jsxs)("div",{className:"flex items-start gap-4 mb-4",children:[(0,t.jsx)("div",{className:"w-14 h-14 bg-blue-50 rounded-2xl flex items-center justify-center text-3xl border border-blue-100 shrink-0",children:e.icon}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("div",{className:"flex justify-between items-start",children:(0,t.jsx)("span",{className:"bg-blue-100 text-blue-600 text-[10px] font-bold px-2 py-0.5 rounded mb-1 inline-block uppercase tracking-wider",children:e.type})}),(0,t.jsx)("h3",{className:"font-bold text-[#1F2E4A] text-sm mb-1",children:e.title}),e.description&&(0,t.jsx)("p",{className:"text-xs text-gray-400 mb-2",children:e.description}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-xs font-bold text-gray-400 bg-gray-50 p-2 rounded-lg inline-flex",children:[(0,t.jsx)(n,{className:"w-3 h-3 text-[#FFD700]"}),(0,t.jsx)("span",{className:"text-[#FFD700] text-sm",children:e.reward})]})]})]}),(0,t.jsx)("button",{onClick:()=>v(e),className:"w-full py-2 bg-slate-100 font-bold text-slate-500 rounded-xl text-xs hover:bg-[#7AC0E7] hover:text-white transition-colors",children:"Submit Proof"})]},s))}),(0,t.jsx)(a.AnimatePresence,{children:j&&(0,t.jsx)(l.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-6",children:(0,t.jsx)(l.motion.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},className:"bg-white w-full max-w-sm rounded-[2rem] p-6 shadow-2xl relative overflow-hidden",children:"success"===E?(0,t.jsxs)("div",{className:"flex flex-col items-center py-6 text-center",children:[(0,t.jsx)("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mb-4 text-green-500",children:(0,t.jsx)(r.CheckCircle2,{className:"w-8 h-8"})}),(0,t.jsx)("h3",{className:"text-xl font-black text-[#1F2E4A] mb-2",children:"Submission Sent!"}),(0,t.jsx)("p",{className:"text-gray-500 text-xs",children:"Admin will review your proof shortly."})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("button",{onClick:()=>v(null),className:"absolute top-4 right-4 text-gray-300 hover:text-gray-600 p-2",children:(0,t.jsx)(d.X,{className:"w-6 h-6"})}),(0,t.jsx)("h3",{className:"text-lg font-black text-[#1F2E4A] mb-1",children:"Submit Quest"}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mb-4 font-bold",children:j.title}),(0,t.jsxs)("div",{className:"bg-blue-50 p-3 rounded-xl mb-4 flex items-center gap-3",children:[(0,t.jsx)("div",{className:"text-2xl",children:j.icon}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-[10px] text-blue-400 font-bold uppercase",children:"Reward"}),(0,t.jsx)("div",{className:"text-sm font-bold text-blue-600",children:j.reward})]})]}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-wider mb-1 block",children:"Proof / Details"}),(0,t.jsx)("textarea",{value:w,onChange:e=>N(e.target.value),placeholder:"Example: I won against Player X at Gym (See attached link)...",className:"w-full bg-gray-50 border border-gray-200 rounded-xl p-3 text-sm min-h-[100px] outline-none focus:border-blue-400 transition-colors resize-none"})]}),(0,t.jsxs)("button",{disabled:k||!w.trim(),onClick:T,className:"w-full py-3.5 bg-[#4A90E2] hover:bg-[#357ABD] text-white font-bold rounded-xl shadow-lg shadow-blue-200 transition-all disabled:opacity-50 disabled:shadow-none flex items-center justify-center gap-2",children:[k?(0,t.jsx)(o.Loader2,{className:"w-5 h-5 animate-spin"}):(0,t.jsx)(c.Send,{className:"w-5 h-5"}),"Submit for Review"]})]})})})})]})}e.s(["default",()=>h],10716)}]);